"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chatbot/route";
exports.ids = ["app/api/chatbot/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchatbot%2Froute&page=%2Fapi%2Fchatbot%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchatbot%2Froute.js&appDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchatbot%2Froute&page=%2Fapi%2Fchatbot%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchatbot%2Froute.js&appDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Downloads_gjts_karnataka_website_app_api_chatbot_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chatbot/route.js */ \"(rsc)/./app/api/chatbot/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chatbot/route\",\n        pathname: \"/api/chatbot\",\n        filename: \"route\",\n        bundlePath: \"app/api/chatbot/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Downloads\\\\gjts-karnataka-website\\\\app\\\\api\\\\chatbot\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_HP_Downloads_gjts_karnataka_website_app_api_chatbot_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/chatbot/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0Ym90JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjaGF0Ym90JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2hhdGJvdCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rvd25sb2FkcyU1Q2dqdHMta2FybmF0YWthLXdlYnNpdGUlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0hQJTVDRG93bmxvYWRzJTVDZ2p0cy1rYXJuYXRha2Etd2Vic2l0ZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzZCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2p0cy1rYXJuYXRha2Etd2Vic2l0ZS8/MzRhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIUFxcXFxEb3dubG9hZHNcXFxcZ2p0cy1rYXJuYXRha2Etd2Vic2l0ZVxcXFxhcHBcXFxcYXBpXFxcXGNoYXRib3RcXFxccm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0Ym90L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdGJvdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdGJvdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEhQXFxcXERvd25sb2Fkc1xcXFxnanRzLWthcm5hdGFrYS13ZWJzaXRlXFxcXGFwcFxcXFxhcGlcXFxcY2hhdGJvdFxcXFxyb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY2hhdGJvdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchatbot%2Froute&page=%2Fapi%2Fchatbot%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchatbot%2Froute.js&appDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/chatbot/route.js":
/*!**********************************!*\
  !*** ./app/api/chatbot/route.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./lib/mongodb.js\");\n/* harmony import */ var _lib_models_Grant__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/models/Grant */ \"(rsc)/./lib/models/Grant.js\");\n\n\n\n\n\n// MyScheme.gov.in API integration\nconst MYSCHEME_API_BASE = \"https://www.myscheme.gov.in/api\";\n// Fetch all schemes from MyScheme.gov.in\nasync function fetchMySchemeData() {\n    try {\n        console.log(\"Fetching schemes from MyScheme.gov.in...\");\n        // Try the main schemes endpoint\n        const response = await fetch(`${MYSCHEME_API_BASE}/schemes`, {\n            method: \"GET\",\n            headers: {\n                \"Accept\": \"application/json\",\n                \"User-Agent\": \"GJTS-Karnataka-Grant-Assistant/1.0\"\n            },\n            timeout: 10000\n        });\n        if (!response.ok) {\n            console.log(`MyScheme API returned ${response.status}, trying alternative endpoint...`);\n            // Try alternative endpoint\n            const altResponse = await fetch(`${MYSCHEME_API_BASE}/v1/schemes/all`, {\n                method: \"GET\",\n                headers: {\n                    \"Accept\": \"application/json\",\n                    \"User-Agent\": \"GJTS-Karnataka-Grant-Assistant/1.0\"\n                },\n                timeout: 10000\n            });\n            if (!altResponse.ok) {\n                throw new Error(`Both endpoints failed: ${response.status}, ${altResponse.status}`);\n            }\n            const data = await altResponse.json();\n            return data;\n        }\n        const data = await response.json();\n        console.log(`Successfully fetched ${data?.schemes?.length || data?.length || \"unknown\"} schemes from MyScheme.gov.in`);\n        return data;\n    } catch (error) {\n        console.error(\"Error fetching MyScheme data:\", error.message);\n        // Return mock data structure for development/testing\n        return {\n            schemes: [\n                {\n                    id: \"mock-1\",\n                    name: \"Samagra Shiksha Abhiyan\",\n                    description: \"Comprehensive scheme for school education covering infrastructure, teacher training, and quality improvement\",\n                    ministry: \"Ministry of Education\",\n                    category: \"Education\",\n                    beneficiaries: [\n                        \"Schools\",\n                        \"Students\",\n                        \"Teachers\"\n                    ],\n                    amount: \"Rs 2,94,283 crore\",\n                    eligibility: \"Government and aided schools\",\n                    applicationProcess: \"Through state education department\",\n                    website: \"https://samagrashiksha.in\"\n                },\n                {\n                    id: \"mock-2\",\n                    name: \"PM SHRI Schools\",\n                    description: \"Pradhan Mantri Schools for Rising India - Model schools with modern infrastructure\",\n                    ministry: \"Ministry of Education\",\n                    category: \"Education Infrastructure\",\n                    beneficiaries: [\n                        \"Schools\"\n                    ],\n                    amount: \"Rs 27,360 crore\",\n                    eligibility: \"Selected government schools\",\n                    applicationProcess: \"Through online portal\",\n                    website: \"https://pmshri.education.gov.in\"\n                }\n            ]\n        };\n    }\n}\n// Calculate similarity between school needs and scheme\nfunction calculateSchemeSimilarity(scheme, schoolAnswers) {\n    let score = 0;\n    let reasons = [];\n    const schemeText = `${scheme.name} ${scheme.description} ${scheme.category} ${scheme.beneficiaries?.join(\" \")}`.toLowerCase();\n    // Category matching\n    if (schoolAnswers.need) {\n        const needKeywords = {\n            \"infrastructure\": [\n                \"infrastructure\",\n                \"building\",\n                \"construction\",\n                \"facility\",\n                \"classroom\"\n            ],\n            \"digital\": [\n                \"digital\",\n                \"technology\",\n                \"computer\",\n                \"internet\",\n                \"smart\",\n                \"ict\"\n            ],\n            \"laboratory\": [\n                \"laboratory\",\n                \"lab\",\n                \"science\",\n                \"equipment\",\n                \"apparatus\"\n            ],\n            \"library\": [\n                \"library\",\n                \"book\",\n                \"reading\",\n                \"resource\",\n                \"learning material\"\n            ],\n            \"sports\": [\n                \"sports\",\n                \"physical\",\n                \"playground\",\n                \"athletic\",\n                \"fitness\"\n            ],\n            \"teacher\": [\n                \"teacher\",\n                \"training\",\n                \"professional development\",\n                \"faculty\",\n                \"capacity building\"\n            ],\n            \"inclusive\": [\n                \"inclusive\",\n                \"special needs\",\n                \"disability\",\n                \"accessible\",\n                \"cwsn\"\n            ],\n            \"vocational\": [\n                \"vocational\",\n                \"skill\",\n                \"employment\",\n                \"job\",\n                \"career\",\n                \"training\"\n            ]\n        };\n        const keywords = needKeywords[schoolAnswers.need] || [];\n        const matchedKeywords = keywords.filter((keyword)=>schemeText.includes(keyword));\n        if (matchedKeywords.length > 0) {\n            score += 40;\n            reasons.push(`Matches your ${schoolAnswers.category} needs (${matchedKeywords.join(\", \")})`);\n        }\n    }\n    // Education-specific matching\n    if (schemeText.includes(\"education\") || schemeText.includes(\"school\")) {\n        score += 25;\n        reasons.push(\"Education-focused scheme\");\n    }\n    // Government scheme preference\n    if (scheme.ministry || schemeText.includes(\"government\") || schemeText.includes(\"ministry\")) {\n        score += 15;\n        reasons.push(\"Government scheme - reliable funding\");\n    }\n    // Infrastructure matching\n    if (schoolAnswers.infrastructure === \"lacking\" && schemeText.includes(\"infrastructure\")) {\n        score += 20;\n        reasons.push(\"Addresses infrastructure gaps\");\n    }\n    // Budget consideration (if amount info available)\n    if (scheme.amount && schoolAnswers.budget) {\n        // Extract numeric value from amount string\n        const amountMatch = scheme.amount.match(/[\\d,]+/);\n        if (amountMatch) {\n            const schemeAmount = parseInt(amountMatch[0].replace(/,/g, \"\"));\n            if (schemeAmount >= schoolAnswers.budget) {\n                score += 10;\n                reasons.push(\"Adequate funding amount\");\n            }\n        }\n    }\n    return {\n        score: Math.min(score, 100),\n        reasons\n    };\n}\n// Load government data about GJTS schools\nlet gjtsData;\ntry {\n    const dataPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"data\", \"gjts-government-data.json\");\n    const fileContent = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(dataPath, \"utf8\");\n    gjtsData = JSON.parse(fileContent);\n} catch (error) {\n    console.error(\"Error loading GJTS data:\", error);\n    gjtsData = {\n        schools: [],\n        about: {},\n        admissions: {},\n        courses: {},\n        facilities: {},\n        placements: {}\n    };\n}\n// Enhanced chatbot with comprehensive knowledge and grants Q&A\nasync function generateResponse(message, conversationContext = {}) {\n    const lowerMessage = message.toLowerCase();\n    // Check if we're in the middle of grant questionnaire\n    if (conversationContext.inGrantQuestionnaire && conversationContext.step) {\n        return await processGrantQuestionnaire(message, conversationContext.step, conversationContext);\n    }\n    // Grants-related queries - NEW FEATURE\n    if (lowerMessage.match(/grant|funding|financial support|money|fund|apply|application/)) {\n        // Check if asking about grants\n        if (lowerMessage.match(/what grant|which grant|help.*choose|recommend.*grant|find.*grant|available grant|grant.*apply|choose.*grant/)) {\n            return {\n                message: `ğŸ¯ I can help you find the perfect grant for your school! Let me ask you a few questions to recommend the best grants:\r\n\r\n**Question 1 of 5:** What is your school's primary need right now?\r\n\r\nA) ğŸ—ï¸ Infrastructure (buildings, classrooms, furniture)\r\nB) ğŸ’» Digital/Technology (computers, internet, smart classrooms)\r\nC) ğŸ”¬ Laboratory Equipment (science labs, equipment)\r\nD) ğŸ“š Library & Learning Resources\r\nE) ğŸƒ Sports Facilities\r\nF) ğŸ‘¨â€ğŸ« Teacher Training & Development\r\nG) â™¿ Inclusive Education (special needs support)\r\nH) ğŸ“ Vocational/Skill Development\r\n\r\nPlease reply with the letter (A-H) or describe your need.`,\n                type: \"grant_question\",\n                step: 1,\n                context: {\n                    inGrantQuestionnaire: true,\n                    step: 1,\n                    grantAnswers: {}\n                }\n            };\n        }\n        // General grants information\n        if (lowerMessage.match(/how many|list.*grant|all grant|available grant/)) {\n            return {\n                message: `ğŸ’° We have discovered **12+ real government grants** available for GJTS schools:\r\n\r\n**ğŸŒ LIVE DATA SOURCES:**\r\nâ€¢ Local Database: 12 verified grants\r\nâ€¢ MyScheme.gov.in: Real-time government schemes (updated daily)\r\n\r\n**Major Schemes:**\r\n1. ğŸ›ï¸ Samagra Shiksha Abhiyan - Rs 2,94,283 crore (comprehensive school development)\r\n2. ğŸ¯ PM SHRI Schools - Rs 27,360 crore (model school transformation)\r\n3. ğŸ—ï¸ Karnataka Infrastructure Grant - Rs 850 crore\r\n\r\n**Specific Purpose Grants (Rs 2-20 lakh per school):**\r\n4. ğŸ’» Digital Education Infrastructure\r\n5. ğŸ½ï¸ Mid-Day Meal Enhancement\r\n6. ğŸ”¬ Science Lab Modernization\r\n7. ğŸ“š Library Development\r\n8. ğŸƒ Sports Infrastructure\r\n9. ğŸ‘¨â€ğŸ« Teacher Training\r\n10. â™¿ Inclusive Education Support\r\n11. ğŸ“ Vocational Education\r\n12. ğŸ”§ School Maintenance Fund\r\n\r\n**ğŸš€ NEW FEATURE:** Real-time integration with MyScheme.gov.in portal for latest government schemes!\r\n\r\nWould you like me to help you choose the most suitable grants for your school? Just say \"help me choose a grant\" and I'll ask you a few questions!`,\n                type: \"grant_info\"\n            };\n        }\n        // Application help\n        if (lowerMessage.match(/how.*apply|application process|apply for|steps.*apply/)) {\n            return {\n                message: `ğŸ“ **Grant Application Process - General Steps:**\r\n\r\n**Step 1: Identify Suitable Grants**\r\nâ€¢ Use our AI to match your school's needs with available grants\r\nâ€¢ Check eligibility criteria carefully\r\n\r\n**Step 2: Prepare Documents**\r\nCommon documents needed:\r\nâ€¢ School registration certificate\r\nâ€¢ UDISE code\r\nâ€¢ Previous year's financial statements\r\nâ€¢ Infrastructure assessment report\r\nâ€¢ Student enrollment data\r\nâ€¢ Staff details\r\nâ€¢ Bank account information\r\n\r\n**Step 3: Online Application**\r\nâ€¢ Visit the grant provider's official portal\r\nâ€¢ Create account/login\r\nâ€¢ Fill application form accurately\r\nâ€¢ Upload required documents\r\nâ€¢ Submit before deadline\r\n\r\n**Step 4: Follow-up**\r\nâ€¢ Note your application reference number\r\nâ€¢ Track application status online\r\nâ€¢ Respond to queries promptly\r\nâ€¢ Prepare for site inspection if required\r\n\r\n**Step 5: Grant Utilization**\r\nâ€¢ Use funds only for approved purposes\r\nâ€¢ Maintain proper accounts\r\nâ€¢ Submit utilization certificates\r\nâ€¢ Keep all bills and receipts\r\n\r\nğŸ’¡ **Want specific guidance?** Tell me which grant you're interested in, and I'll provide detailed application steps and required documents!`,\n                type: \"application_help\"\n            };\n        }\n    }\n    // Greetings\n    if (lowerMessage.match(/^(hello|hi|hey|greetings|good morning|good afternoon|good evening)$/i)) {\n        return `Hello! I'm your GJTS Karnataka Assistant. I have comprehensive knowledge about all 6 Government Junior Technical Schools in Karnataka. I can help you with:\r\n\r\nğŸ“š Admissions & Eligibility\r\nğŸ“ Courses & Curriculum\r\nğŸ« School Locations & Facilities\r\nğŸ’¼ Placements & Career Paths\r\nğŸ’° Scholarships & Financial Aid\r\nğŸ¤ Quest Global Partnership\r\nğŸ‘¥ Alumni Network\r\nğŸ¯ **NEW: Grant Discovery & Application Help**\r\n\r\nWhat would you like to know?`;\n    }\n    // About GJTS\n    if (lowerMessage.match(/what is|about|tell me about|information about/) && lowerMessage.match(/gjts|government junior technical/)) {\n        return `Government Junior Technical Schools (GJTS) are specialized technical education institutions in Karnataka managed by the Department of Technical Education.\r\n\r\nğŸ¯ Key Facts:\r\nâ€¢ Established: 2013 (started with Hubballi, expanded to 6 schools in 2023)\r\nâ€¢ Total Schools: 6 campuses across Karnataka\r\nâ€¢ Total Students: 800+ students\r\nâ€¢ Grades: 8th to 10th standard\r\nâ€¢ Partnership: Quest Global & Uthishta NGO\r\nâ€¢ Placement Rate: 70% for engineering graduates\r\nâ€¢ Admission Growth: 17% year-on-year\r\n\r\nğŸ“ Mission: Provide quality technical education to students from economically weaker sections and prepare them for technical careers.\r\n\r\nThe initiative has been supported by Quest Global for over a decade, providing infrastructure, scholarships, and career pathways.`;\n    }\n    // Schools information\n    if (lowerMessage.includes(\"school\") || lowerMessage.includes(\"campus\") || lowerMessage.includes(\"location\")) {\n        if (lowerMessage.includes(\"how many\") || lowerMessage.includes(\"list\") || lowerMessage.includes(\"all\")) {\n            return `We have 6 GJTS campuses across Karnataka:\r\n\r\n1. ğŸ« GJTS Ballari (Est. 2013) - 150 students\r\n   District: Ballari | Courses: Electronics, Mechanical, Computer Science\r\n\r\n2. ğŸ« GJTS Bhadravati (Est. 2023) - 140 students\r\n   District: Shivamogga | Courses: Electronics, Mechanical, Electrical\r\n   Facilities: Hostel available\r\n\r\n3. ğŸ« GJTS Hubballi (Est. 2013) - 160 students\r\n   District: Dharwad | Courses: Electronics, Mechanical, Computer Science\r\n   Achievement: Highest placement rate, Robotics winners\r\n\r\n4. ğŸ« GJTS Bagalkot (Est. 2023) - 135 students\r\n   District: Bagalkot | Courses: Electronics, Mechanical\r\n\r\n5. ğŸ« GJTS Kalburgi (Est. 2023) - 145 students\r\n   District: Kalaburagi | Courses: Electronics, Mechanical, Computer Science\r\n   Facilities: Hostel available\r\n\r\n6. ğŸ« GJTS Mangalore (Est. 2023) - 155 students\r\n   District: Dakshina Kannada | Courses: Electronics, Mechanical, Electrical\r\n\r\nEach school offers quality technical education with modern facilities!`;\n        }\n        // Specific school queries\n        const schoolNames = [\n            \"ballari\",\n            \"bhadravati\",\n            \"hubballi\",\n            \"bagalkot\",\n            \"kalburgi\",\n            \"mangalore\"\n        ];\n        for (const schoolName of schoolNames){\n            if (lowerMessage.includes(schoolName)) {\n                const school = gjtsData.schools.find((s)=>s.name.toLowerCase().includes(schoolName));\n                if (school) {\n                    return `ğŸ“ ${school.name}\r\n\r\nğŸ›ï¸ Location: ${school.location}, ${school.district} District\r\nğŸ“… Established: ${school.established}\r\nğŸ‘¥ Students: ${school.students}\r\nğŸ“§ Email: ${school.email}\r\nğŸ“ Phone: ${school.phone}\r\nğŸ“® Address: ${school.address}\r\n\r\nğŸ“š Courses Offered:\r\n${school.courses.map((c)=>`â€¢ ${c}`).join(\"\\n\")}\r\n\r\nğŸ—ï¸ Facilities:\r\n${school.facilities.map((f)=>`â€¢ ${f}`).join(\"\\n\")}\r\n\r\nğŸ† Achievements:\r\n${school.achievements.map((a)=>`â€¢ ${a}`).join(\"\\n\")}\r\n\r\nWould you like to know more about admissions or courses?`;\n                }\n            }\n        }\n    }\n    // Admissions\n    if (lowerMessage.includes(\"admission\") || lowerMessage.includes(\"apply\") || lowerMessage.includes(\"enroll\") || lowerMessage.includes(\"eligibility\")) {\n        return `ğŸ“ GJTS Admissions Information\r\n\r\nâœ… Eligibility:\r\nâ€¢ Students who have completed 7th standard\r\nâ€¢ Age: 13-15 years\r\nâ€¢ Open to all students, priority for economically weaker sections\r\n\r\nğŸ“‹ Application Process:\r\n1. Online application through official website\r\n2. Entrance examination\r\n3. Merit-based selection\r\n4. Document verification\r\n5. Final admission\r\n\r\nğŸ“„ Required Documents:\r\nâ€¢ 7th standard marks card\r\nâ€¢ Transfer certificate\r\nâ€¢ Caste certificate (if applicable)\r\nâ€¢ Income certificate\r\nâ€¢ Aadhar card\r\nâ€¢ Passport size photographs\r\n\r\nğŸ’° Fees: Minimal fees with extensive scholarship support\r\n\r\nğŸ“ˆ Recent Achievement: 17% increase in admissions due to improved facilities and outcomes!\r\n\r\nFor specific school admissions, please contact the school directly or visit our Admissions page.`;\n    }\n    // Courses\n    if (lowerMessage.includes(\"course\") || lowerMessage.includes(\"subject\") || lowerMessage.includes(\"stream\") || lowerMessage.includes(\"curriculum\")) {\n        return `ğŸ“ GJTS Courses & Curriculum\r\n\r\nâ±ï¸ Duration: 3 years (Grade 8 to Grade 10)\r\nğŸ“š Board: Karnataka State Board with technical subjects\r\n\r\nğŸ”§ Technical Streams:\r\n\r\n1. ğŸ“¡ Electronics\r\n   â€¢ Basic electronics & circuits\r\n   â€¢ Digital electronics\r\n   â€¢ Practical training\r\n   Career: Electronics Technician, Maintenance Engineer\r\n\r\n2. âš™ï¸ Mechanical Engineering\r\n   â€¢ Workshop practice\r\n   â€¢ Machine tools & fitting\r\n   â€¢ Welding & mechanical systems\r\n   Career: Mechanical Technician, Production Assistant\r\n\r\n3. ğŸ’» Computer Science\r\n   â€¢ Programming basics\r\n   â€¢ Computer hardware & software\r\n   â€¢ Web development\r\n   Career: IT Support, Junior Programmer\r\n\r\n4. âš¡ Electrical Engineering\r\n   â€¢ Electrical circuits & wiring\r\n   â€¢ Motors & generators\r\n   â€¢ Power systems\r\n   Career: Electrical Technician, Wireman\r\n\r\nAll courses include hands-on training with modern equipment and experienced faculty!`;\n    }\n    // Facilities\n    if (lowerMessage.includes(\"facilit\") || lowerMessage.includes(\"infrastructure\") || lowerMessage.includes(\"lab\")) {\n        return `ğŸ—ï¸ GJTS Facilities & Infrastructure\r\n\r\nThanks to Quest Global's support, our schools have modern facilities:\r\n\r\nğŸ”¬ Academic Facilities:\r\nâ€¢ Well-equipped science laboratories\r\nâ€¢ Modern computer labs with internet\r\nâ€¢ Technical workshops with latest equipment\r\nâ€¢ Well-stocked libraries\r\nâ€¢ Smart classrooms with digital learning tools\r\n\r\nğŸƒ Other Facilities:\r\nâ€¢ Sports facilities and playgrounds\r\nâ€¢ Separate hostels for boys and girls (Bhadravati, Kalburgi, Mangalore)\r\nâ€¢ Transportation facilities\r\nâ€¢ Medical facilities\r\nâ€¢ Nutritious mid-day meals\r\n\r\nğŸ Free Provisions for All Students:\r\nâ€¢ Uniforms\r\nâ€¢ School bags\r\nâ€¢ Tool kits\r\nâ€¢ Textbooks\r\nâ€¢ Sports materials\r\n\r\nRecent Upgrades (2023-2026):\r\nâ€¢ All-in-one desktop units with MS Office\r\nâ€¢ Infrastructure upgrades (desks, benches, book racks)\r\nâ€¢ Waterproofing and painting\r\nâ€¢ Digital literacy training for faculty`;\n    }\n    // Placement & Career\n    if (lowerMessage.includes(\"placement\") || lowerMessage.includes(\"job\") || lowerMessage.includes(\"career\") || lowerMessage.includes(\"employment\")) {\n        return `ğŸ’¼ GJTS Placements & Career Outcomes\r\n\r\nğŸ¯ Impressive Results:\r\nâ€¢ 70% placement rate for engineering graduates\r\nâ€¢ Many graduates work with leading technology firms including Quest Global\r\nâ€¢ Strong education-to-employment pathway\r\n\r\nğŸ¤ Industry Partners:\r\nâ€¢ Quest Global (primary partner)\r\nâ€¢ Bosch\r\nâ€¢ Toyota\r\nâ€¢ Infosys\r\nâ€¢ TCS\r\nâ€¢ Local industries\r\n\r\nğŸ“ˆ Career Support:\r\nâ€¢ Career counseling\r\nâ€¢ Skill development workshops\r\nâ€¢ Industry visits\r\nâ€¢ Internship opportunities\r\nâ€¢ Placement assistance\r\nâ€¢ Higher education guidance\r\n\r\nğŸ“ Career Pathways After 10th:\r\n1. Direct employment in technical roles\r\n2. Diploma courses through lateral entry\r\n3. Engineering degrees through DCET (with Quest Global scholarships)\r\n4. ITI courses\r\n5. Entrepreneurship\r\n\r\nSuccess Story: Students who receive DCET scholarships and complete engineering have 70% employment rate with top tech firms!`;\n    }\n    // Scholarships\n    if (lowerMessage.includes(\"scholarship\") || lowerMessage.includes(\"financial\") || lowerMessage.includes(\"fees\") || lowerMessage.includes(\"cost\")) {\n        return `ğŸ’° GJTS Scholarships & Financial Support\r\n\r\nQuest Global provides extensive scholarship support:\r\n\r\nğŸ† Merit-Based Scholarships:\r\nâ€¢ For top-performing students in grades 8-10\r\nâ€¢ Available across all six GJTS campuses\r\nâ€¢ Covers tuition and learning materials\r\n\r\nğŸ“ Higher Education Scholarships:\r\nâ€¢ For JTS alumni pursuing Engineering degrees\r\nâ€¢ Available for students qualifying through DCET (Diploma Common Entrance Test)\r\nâ€¢ Covers engineering education costs\r\n\r\nğŸ“‹ Government Scholarships:\r\nâ€¢ SC/ST scholarships\r\nâ€¢ Minority scholarships\r\nâ€¢ EWS (Economically Weaker Section) support\r\nâ€¢ OBC scholarships\r\n\r\nğŸ’µ Fee Structure:\r\nâ€¢ Minimal fees for GJTS education\r\nâ€¢ Most students receive full or partial scholarship support\r\nâ€¢ Free uniforms, books, bags, tool kits, and meals\r\n\r\nğŸ“ For scholarship applications, contact your nearest GJTS campus or visit the Admissions page.`;\n    }\n    // Quest Global Partnership\n    if (lowerMessage.includes(\"quest\") || lowerMessage.includes(\"partner\") || lowerMessage.includes(\"uthishta\") || lowerMessage.includes(\"support\")) {\n        return `ğŸ¤ Quest Global Partnership\r\n\r\nQuest Global, the world's largest independent pure-play engineering services company, has been supporting GJTS schools for over a decade through their \"Education for Underserved\" initiative in collaboration with NGO partner Uthishta.\r\n\r\nğŸ“… Timeline:\r\nâ€¢ 2013: Started with single school in Hubballi\r\nâ€¢ 2023: Expanded to all 6 GJTS institutions\r\nâ€¢ 2026: Continuing strong support and growth\r\n\r\nğŸ’¡ Quest Global's Contributions:\r\nâ€¢ Infrastructure development (labs, libraries, furniture)\r\nâ€¢ Digital literacy (computers, software, trained faculty)\r\nâ€¢ Learning resources and technology access\r\nâ€¢ Merit-based scholarships for grades 8-10\r\nâ€¢ DCET scholarships for engineering aspirants\r\nâ€¢ Skills development workshops\r\nâ€¢ Career counseling and placement support\r\n\r\nğŸ“Š Impact:\r\nâ€¢ 800+ students directly benefited\r\nâ€¢ 17% increase in admissions\r\nâ€¢ Improved attendance rates\r\nâ€¢ 70% placement rate for engineering graduates\r\nâ€¢ Many alumni now work at Quest Global\r\n\r\nğŸ¯ Mission: Create long-term value through education and skill development, opening doors for students from underserved communities.\r\n\r\n\"By strengthening Junior Technical Schools and creating clear pathways to higher education, we are shaping the future of India's engineering talent.\" - Ajit Prabhu, Co-founder & CEO, Quest Global`;\n    }\n    // Alumni\n    if (lowerMessage.includes(\"alumni\") || lowerMessage.includes(\"graduate\") || lowerMessage.includes(\"former student\")) {\n        return `ğŸ‘¥ GJTS Alumni Network\r\n\r\nOur alumni network is growing strong with impressive outcomes!\r\n\r\nğŸ“Š Alumni Success:\r\nâ€¢ 70% of engineering graduates secured employment with leading tech firms\r\nâ€¢ Many alumni work at Quest Global, Bosch, Toyota, Infosys, TCS\r\nâ€¢ Some pursuing post-graduation courses\r\nâ€¢ Several taking internship opportunities\r\nâ€¢ Strong education-to-employment pathway\r\n\r\nğŸ“ Alumni Support:\r\nâ€¢ DCET scholarships for engineering aspirants\r\nâ€¢ Career guidance and mentorship\r\nâ€¢ Networking opportunities\r\nâ€¢ Job placement assistance\r\nâ€¢ Continued connection with GJTS community\r\n\r\nğŸ’¼ Career Progression:\r\nMany students successfully transition from:\r\nGJTS (8-10th) â†’ Diploma/ITI â†’ Engineering (via DCET) â†’ Employment\r\n\r\nğŸŒŸ Success Stories:\r\nâ€¢ Graduates returning as professionals to the ecosystem that nurtured them\r\nâ€¢ Alumni working with leading technology firms\r\nâ€¢ Some pursuing advanced degrees and research\r\n\r\nğŸ“ Alumni Registration:\r\nVisit our Alumni page to register, stay connected, and contribute to the community!`;\n    }\n    // Contact\n    if (lowerMessage.includes(\"contact\") || lowerMessage.includes(\"phone\") || lowerMessage.includes(\"email\") || lowerMessage.includes(\"reach\")) {\n        return `ğŸ“ Contact Information\r\n\r\nğŸ›ï¸ Department of Technical Education, Karnataka\r\nğŸ“§ Email: dte@kar.nic.in\r\nğŸŒ Website: https://dte.kar.nic.in\r\n\r\nğŸ“® GJTS General Contact:\r\nğŸ“§ Email: info@gjtskarnataka.edu.in\r\nğŸ“ Helpline: 1800-XXX-XXXX\r\nâ° Hours: Monday to Friday, 9:00 AM to 5:00 PM\r\n\r\nğŸ« Individual School Contacts:\r\n\r\n1. GJTS Ballari: gjts.ballari@dte.kar.nic.in | +91-8392-XXXXXX\r\n2. GJTS Bhadravati: gjts.bhadravati@dte.kar.nic.in | +91-8182-XXXXXX\r\n3. GJTS Hubballi: gjts.hubballi@dte.kar.nic.in | +91-836-XXXXXX\r\n4. GJTS Bagalkot: gjts.bagalkot@dte.kar.nic.in | +91-8354-XXXXXX\r\n5. GJTS Kalburgi: gjts.kalburgi@dte.kar.nic.in | +91-8472-XXXXXX\r\n6. GJTS Mangalore: gjts.mangalore@dte.kar.nic.in | +91-824-XXXXXX\r\n\r\nFor specific inquiries, please contact the relevant school directly!`;\n    }\n    // Hostel\n    if (lowerMessage.includes(\"hostel\") || lowerMessage.includes(\"accommodation\") || lowerMessage.includes(\"boarding\")) {\n        return `ğŸ  Hostel Facilities\r\n\r\nHostel facilities are available at select GJTS campuses:\r\n\r\nâœ… Schools with Hostel:\r\n1. GJTS Bhadravati (Shivamogga District)\r\n2. GJTS Kalburgi (Kalaburagi District)\r\n3. GJTS Mangalore (Dakshina Kannada District)\r\n\r\nğŸ¢ Hostel Features:\r\nâ€¢ Separate hostels for boys and girls\r\nâ€¢ Safe and secure environment\r\nâ€¢ Nutritious meals provided\r\nâ€¢ Study rooms and common areas\r\nâ€¢ 24/7 supervision\r\nâ€¢ Medical facilities nearby\r\n\r\nğŸ’° Hostel Fees: Minimal charges with scholarship support available\r\n\r\nğŸ“ For hostel admission and availability, please contact the specific school directly.\r\n\r\nOther schools provide transportation facilities for day scholars.`;\n    }\n    // Age/Grade specific\n    if (lowerMessage.match(/what age|age limit|which grade|which class/)) {\n        return `ğŸ‘¦ğŸ‘§ Age & Grade Requirements\r\n\r\nğŸ“š GJTS offers education for:\r\nâ€¢ Grades: 8th to 10th standard\r\nâ€¢ Age: 13-15 years\r\nâ€¢ Entry: After completing 7th standard\r\n\r\nğŸ“‹ Eligibility:\r\nâ€¢ Students who have completed 7th standard\r\nâ€¢ Age between 13-15 years at time of admission\r\nâ€¢ Open to all students, priority for economically weaker sections\r\n\r\nğŸ“ After 10th Standard:\r\nStudents can pursue:\r\nâ€¢ Diploma courses (lateral entry)\r\nâ€¢ Engineering through DCET\r\nâ€¢ ITI courses\r\nâ€¢ Direct employment\r\nâ€¢ Entrepreneurship\r\n\r\nThe 3-year program provides strong technical foundation for future careers!`;\n    }\n    // Documents\n    if (lowerMessage.includes(\"document\") || lowerMessage.includes(\"certificate\") || lowerMessage.includes(\"what do i need\")) {\n        return `ğŸ“„ Required Documents for Admission\r\n\r\nPlease prepare the following documents:\r\n\r\nâœ… Academic Documents:\r\nâ€¢ 7th standard marks card\r\nâ€¢ Transfer certificate from previous school\r\nâ€¢ School leaving certificate\r\n\r\nâœ… Identity Documents:\r\nâ€¢ Aadhar card (student)\r\nâ€¢ Passport size photographs (recent)\r\n\r\nâœ… Category Certificates (if applicable):\r\nâ€¢ Caste certificate (SC/ST/OBC)\r\nâ€¢ Income certificate (for EWS)\r\nâ€¢ Minority certificate (if applicable)\r\n\r\nâœ… Additional Documents:\r\nâ€¢ Parent/Guardian ID proof\r\nâ€¢ Address proof\r\nâ€¢ Bank account details (for scholarship)\r\n\r\nğŸ“ Note: All documents should be original with photocopies. Certificates should be attested by appropriate authorities.\r\n\r\nFor specific document requirements, please contact your nearest GJTS campus.`;\n    }\n    // Comparison or choice\n    if (lowerMessage.match(/which school|best school|which campus|recommend|choose/)) {\n        return `ğŸ¯ Choosing the Right GJTS Campus\r\n\r\nAll 6 GJTS campuses offer quality education! Here's how to choose:\r\n\r\nğŸ“ By Location:\r\nâ€¢ North Karnataka: Hubballi, Bagalkot, Kalburgi, Ballari\r\nâ€¢ Central Karnataka: Bhadravati\r\nâ€¢ Coastal Karnataka: Mangalore\r\n\r\nğŸ† By Achievements:\r\nâ€¢ Highest Placement: GJTS Hubballi\r\nâ€¢ Robotics Excellence: GJTS Hubballi\r\nâ€¢ Newest Infrastructure: GJTS Bhadravati, Bagalkot, Kalburgi, Mangalore (Est. 2023)\r\n\r\nğŸ  Hostel Availability:\r\nâ€¢ GJTS Bhadravati, Kalburgi, Mangalore\r\n\r\nğŸ“š Course Availability:\r\nâ€¢ All 4 streams: Hubballi, Kalburgi, Mangalore\r\nâ€¢ 3 streams: Ballari, Bhadravati\r\nâ€¢ 2 streams: Bagalkot\r\n\r\nğŸ’¡ Recommendation: Choose based on:\r\n1. Proximity to your home\r\n2. Desired technical stream\r\n3. Hostel requirement\r\n4. Specific school achievements\r\n\r\nAll schools have Quest Global support and excellent facilities!`;\n    }\n    // Default response with helpful suggestions\n    return `I'm here to help! I have detailed information about GJTS Karnataka. You can ask me about:\r\n\r\nğŸ“š Admissions & Eligibility\r\nâ€¢ \"How do I apply?\"\r\nâ€¢ \"What documents do I need?\"\r\nâ€¢ \"What is the age limit?\"\r\n\r\nğŸ“ Courses & Education\r\nâ€¢ \"What courses are offered?\"\r\nâ€¢ \"Tell me about Electronics course\"\r\nâ€¢ \"What is the curriculum?\"\r\n\r\nğŸ« Schools & Locations\r\nâ€¢ \"List all schools\"\r\nâ€¢ \"Tell me about GJTS Hubballi\"\r\nâ€¢ \"Which school has hostel?\"\r\n\r\nğŸ’¼ Career & Placements\r\nâ€¢ \"What are the placement rates?\"\r\nâ€¢ \"Career options after 10th?\"\r\nâ€¢ \"Tell me about Quest Global partnership\"\r\n\r\nğŸ’° Scholarships & Fees\r\nâ€¢ \"What scholarships are available?\"\r\nâ€¢ \"How much are the fees?\"\r\n\r\nğŸ‘¥ Alumni & Success Stories\r\nâ€¢ \"Alumni achievements\"\r\nâ€¢ \"Career outcomes\"\r\n\r\nğŸ¯ **Grants & Funding (NEW!)**\r\nâ€¢ \"What grants are available?\"\r\nâ€¢ \"Help me choose a grant\"\r\nâ€¢ \"How do I apply for grants?\"\r\n\r\nJust ask your question, and I'll provide detailed information!`;\n}\n// Process grant questionnaire responses\nasync function processGrantQuestionnaire(message, step, context) {\n    const lowerMessage = message.toLowerCase();\n    // Initialize context if not exists\n    if (!context.grantAnswers) {\n        context.grantAnswers = {};\n    }\n    // Step 1: Primary Need\n    if (step === 1) {\n        let category = \"\";\n        let need = \"\";\n        // Better pattern matching with more flexibility\n        if (lowerMessage.match(/^a$|infrastructure|building|classroom|furniture|construction|repair/)) {\n            category = \"Infrastructure & Quality\";\n            need = \"infrastructure\";\n        } else if (lowerMessage.match(/^b$|digital|technology|computer|internet|smart|tech|it|software|hardware/)) {\n            category = \"Digital Infrastructure\";\n            need = \"digital\";\n        } else if (lowerMessage.match(/^c$|lab|science|equipment|experiment|apparatus/)) {\n            category = \"Laboratory & Equipment\";\n            need = \"laboratory\";\n        } else if (lowerMessage.match(/^d$|library|book|reading|resource/)) {\n            category = \"Library & Resources\";\n            need = \"library\";\n        } else if (lowerMessage.match(/^e$|sports|playground|physical|athletic|game/)) {\n            category = \"Sports & Physical Education\";\n            need = \"sports\";\n        } else if (lowerMessage.match(/^f$|teacher|training|professional|development|faculty/)) {\n            category = \"Teacher Development\";\n            need = \"teacher\";\n        } else if (lowerMessage.match(/^g$|inclusive|special needs|disability|accessible|cwsn/)) {\n            category = \"Inclusive Education\";\n            need = \"inclusive\";\n        } else if (lowerMessage.match(/^h$|vocational|skill|career|job|employment/)) {\n            category = \"Vocational Training\";\n            need = \"vocational\";\n        } else {\n            return {\n                message: `I understand you're looking for grants, but I need to know your primary need more clearly.\r\n\r\nPlease choose one option:\r\nA) Infrastructure B) Digital/Technology C) Laboratory D) Library E) Sports F) Teacher Training G) Inclusive Education H) Vocational\r\n\r\nOr describe it in simple terms like \"we need computers\" or \"we need sports facilities\"`,\n                type: \"grant_question\",\n                step: 1,\n                context: {\n                    ...context,\n                    step: 1\n                }\n            };\n        }\n        context.grantAnswers.category = category;\n        context.grantAnswers.need = need;\n        return {\n            message: `Perfect! You need support for **${category}**.\r\n\r\n**Question 2 of 5:** What is your school's current student enrollment?\r\n\r\nA) Less than 100 students\r\nB) 100-250 students\r\nC) 250-500 students\r\nD) 500-1000 students\r\nE) More than 1000 students\r\n\r\nPlease reply with the letter (A-E) or tell me the approximate number.`,\n            type: \"grant_question\",\n            step: 2,\n            context: {\n                ...context,\n                step: 2\n            }\n        };\n    }\n    // Step 2: Student Enrollment\n    if (step === 2) {\n        let enrollment = 0;\n        // Extract number from message or use letter choice\n        const numberMatch = message.match(/\\d+/);\n        if (numberMatch) {\n            enrollment = parseInt(numberMatch[0]);\n        } else if (lowerMessage.match(/^a$|less.*100|under 100|below 100|small/)) {\n            enrollment = 75;\n        } else if (lowerMessage.match(/^b$|100.*250|hundred|150|200/)) {\n            enrollment = 175;\n        } else if (lowerMessage.match(/^c$|250.*500|300|400|medium/)) {\n            enrollment = 375;\n        } else if (lowerMessage.match(/^d$|500.*1000|600|700|800|900|large/)) {\n            enrollment = 750;\n        } else if (lowerMessage.match(/^e$|more.*1000|over 1000|1000\\+|very large/)) {\n            enrollment = 1200;\n        } else {\n            return {\n                message: `Please tell me your student enrollment. You can say:\r\n- A letter (A-E)\r\n- A number like \"180 students\" or \"350\"\r\n- Or describe it like \"around 200\" or \"about 400\"`,\n                type: \"grant_question\",\n                step: 2,\n                context: {\n                    ...context,\n                    step: 2\n                }\n            };\n        }\n        context.grantAnswers.enrollment = enrollment;\n        return {\n            message: `Great! Your school has approximately **${enrollment} students**.\r\n\r\n**Question 3 of 5:** What is your estimated budget requirement?\r\n\r\nA) ğŸ’° Rs 10,000 - Rs 1 lakh (Small maintenance/supplies)\r\nB) ğŸ’° Rs 1-5 lakh (Minor upgrades)\r\nC) ğŸ’° Rs 5-15 lakh (Significant improvements)\r\nD) ğŸ’° Rs 15-50 lakh (Major infrastructure)\r\nE) ğŸ’° Rs 50 lakh+ (Comprehensive development)\r\n\r\nPlease reply with the letter (A-E).`,\n            type: \"grant_question\",\n            step: 3,\n            context: {\n                ...context,\n                step: 3\n            }\n        };\n    }\n    // Step 3: Budget Requirement\n    if (step === 3) {\n        let budgetRange = \"\";\n        if (lowerMessage.match(/^a$/)) {\n            budgetRange = \"small\";\n            context.grantAnswers.budget = 50000;\n        } else if (lowerMessage.match(/^b$/)) {\n            budgetRange = \"minor\";\n            context.grantAnswers.budget = 300000;\n        } else if (lowerMessage.match(/^c$/)) {\n            budgetRange = \"significant\";\n            context.grantAnswers.budget = 1000000;\n        } else if (lowerMessage.match(/^d$/)) {\n            budgetRange = \"major\";\n            context.grantAnswers.budget = 3000000;\n        } else if (lowerMessage.match(/^e$/)) {\n            budgetRange = \"comprehensive\";\n            context.grantAnswers.budget = 10000000;\n        } else {\n            return {\n                message: `Please choose one of the budget ranges (A-E).`,\n                type: \"grant_question\",\n                step: 3,\n                context: {\n                    ...context,\n                    step: 3\n                }\n            };\n        }\n        return {\n            message: `Perfect! Budget requirement noted.\r\n\r\n**Question 4 of 5:** Does your school have the following?\r\n\r\nA) âœ… All basic infrastructure (building, electricity, water)\r\nB) âš ï¸ Some infrastructure gaps\r\nC) âŒ Significant infrastructure needs\r\n\r\nPlease reply with the letter (A-C).`,\n            type: \"grant_question\",\n            step: 4,\n            context: {\n                ...context,\n                step: 4\n            }\n        };\n    }\n    // Step 4: Infrastructure Status\n    if (step === 4) {\n        if (lowerMessage.match(/^a$|all|yes|complete/)) {\n            context.grantAnswers.infrastructure = \"complete\";\n        } else if (lowerMessage.match(/^b$|some|partial/)) {\n            context.grantAnswers.infrastructure = \"partial\";\n        } else if (lowerMessage.match(/^c$|significant|no|lacking/)) {\n            context.grantAnswers.infrastructure = \"lacking\";\n        } else {\n            return {\n                message: `Please choose one option (A-C) regarding your infrastructure status.`,\n                type: \"grant_question\",\n                step: 4,\n                context: {\n                    ...context,\n                    step: 4\n                }\n            };\n        }\n        return {\n            message: `Thank you! Last question...\r\n\r\n**Question 5 of 5:** When do you need the funding?\r\n\r\nA) ğŸš¨ Urgent (within 1-2 months)\r\nB) â° Soon (within 3-6 months)\r\nC) ğŸ“… Planning ahead (6-12 months)\r\n\r\nPlease reply with the letter (A-C).`,\n            type: \"grant_question\",\n            step: 5,\n            context: {\n                ...context,\n                step: 5\n            }\n        };\n    }\n    // Step 5: Timeline - Generate Recommendations\n    if (step === 5) {\n        let timeline = \"\";\n        if (lowerMessage.match(/^a$|urgent|immediate/)) {\n            timeline = \"urgent\";\n        } else if (lowerMessage.match(/^b$|soon/)) {\n            timeline = \"soon\";\n        } else if (lowerMessage.match(/^c$|planning|later/)) {\n            timeline = \"planning\";\n        } else {\n            return {\n                message: `Please choose one timeline option (A-C).`,\n                type: \"grant_question\",\n                step: 5,\n                context: {\n                    ...context,\n                    step: 5\n                }\n            };\n        }\n        context.grantAnswers.timeline = timeline;\n        // Generate recommendations based on answers\n        return await generateGrantRecommendations(context.grantAnswers);\n    }\n    return {\n        message: `Something went wrong. Let's start over. Say \"help me choose a grant\" to begin.`,\n        type: \"error\"\n    };\n}\n// Generate grant recommendations based on questionnaire\nasync function generateGrantRecommendations(answers) {\n    try {\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        // Fetch grants from both sources\n        const [localGrants, mySchemeData] = await Promise.all([\n            _lib_models_Grant__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find({\n                status: \"active\"\n            }).lean(),\n            fetchMySchemeData()\n        ]);\n        console.log(`Found ${localGrants.length} local grants and ${mySchemeData?.schemes?.length || 0} MyScheme grants`);\n        // Process local grants\n        const matchedLocalGrants = [];\n        for (const grant of localGrants){\n            let score = 0;\n            let reasons = [];\n            // Match by category\n            if (grant.category && answers.category) {\n                if (grant.category.toLowerCase().includes(answers.need) || answers.category.toLowerCase().includes(grant.category.toLowerCase())) {\n                    score += 40;\n                    reasons.push(`Perfect match for ${answers.category}`);\n                }\n            }\n            // Match by budget\n            if (grant.amount) {\n                const grantMin = grant.amount.min || 0;\n                const grantMax = grant.amount.max || 999999999;\n                if (answers.budget >= grantMin && answers.budget <= grantMax) {\n                    score += 30;\n                    reasons.push(`Budget aligns with your requirement`);\n                }\n            }\n            // Match by enrollment (some grants have minimum student requirements)\n            if (answers.enrollment >= 100) {\n                score += 15;\n                reasons.push(`Your enrollment meets typical requirements`);\n            }\n            // Timeline consideration\n            if (answers.timeline === \"urgent\" && grant.applicationDeadline) {\n                const deadline = new Date(grant.applicationDeadline);\n                const now = new Date();\n                const daysUntilDeadline = Math.floor((deadline - now) / (1000 * 60 * 60 * 24));\n                if (daysUntilDeadline > 30) {\n                    score += 15;\n                    reasons.push(`Sufficient time to apply (${daysUntilDeadline} days)`);\n                }\n            } else {\n                score += 15;\n            }\n            if (score > 0) {\n                matchedLocalGrants.push({\n                    ...grant,\n                    matchScore: score,\n                    matchReasons: reasons,\n                    source: \"local\"\n                });\n            }\n        }\n        // Process MyScheme grants\n        const matchedMySchemeGrants = [];\n        if (mySchemeData?.schemes) {\n            for (const scheme of mySchemeData.schemes){\n                const similarity = calculateSchemeSimilarity(scheme, answers);\n                if (similarity.score > 20) {\n                    matchedMySchemeGrants.push({\n                        title: scheme.name,\n                        description: scheme.description,\n                        grantProvider: scheme.ministry || \"Government of India\",\n                        amount: scheme.amount || \"Amount varies\",\n                        applicationUrl: scheme.website,\n                        category: scheme.category?.toLowerCase() || \"education\",\n                        matchScore: similarity.score,\n                        matchReasons: similarity.reasons,\n                        source: \"myscheme\",\n                        eligibility: scheme.eligibility,\n                        applicationProcess: scheme.applicationProcess\n                    });\n                }\n            }\n        }\n        // Combine and sort all grants\n        const allMatchedGrants = [\n            ...matchedLocalGrants,\n            ...matchedMySchemeGrants\n        ];\n        allMatchedGrants.sort((a, b)=>b.matchScore - a.matchScore);\n        // Take top 5 grants\n        const topGrants = allMatchedGrants.slice(0, 5);\n        if (topGrants.length === 0) {\n            return {\n                message: `Based on your requirements, I couldn't find exact matches. However, I recommend:\r\n\r\n1. **Samagra Shiksha Abhiyan** - Comprehensive scheme covering all aspects of school education\r\n2. **PM SHRI Schools** - For overall school transformation\r\n3. **Karnataka Infrastructure Grant** - State-level support\r\n\r\nPlease visit the Grants Discovery page in your dashboard to explore all available grants, or contact the Department of Technical Education for personalized guidance.`,\n                type: \"grant_recommendations\"\n            };\n        }\n        let response = `ğŸ¯ **Perfect! Based on your answers, here are the TOP ${topGrants.length} GRANTS recommended for your school:**\\n\\n`;\n        response += `ğŸ“Š **Sources:** Local Database (${matchedLocalGrants.length}) + MyScheme.gov.in (${matchedMySchemeGrants.length})\\n\\n`;\n        topGrants.forEach((grant, index)=>{\n            const sourceIcon = grant.source === \"local\" ? \"\\uD83C\\uDFDBï¸\" : \"\\uD83C\\uDF10\";\n            // Display amount properly\n            let amountDisplay = \"\";\n            if (grant.perSchoolAmount) {\n                amountDisplay = `Per School: ${grant.perSchoolAmount}`;\n                if (grant.totalAmount) {\n                    amountDisplay += `\\nğŸ’° Total Scheme: ${grant.totalAmount}`;\n                }\n            } else if (grant.amount && typeof grant.amount === \"object\") {\n                const min = (grant.amount.min || 0).toLocaleString(\"en-IN\");\n                const max = (grant.amount.max || 999999999).toLocaleString(\"en-IN\");\n                amountDisplay = `â‚¹${min} - â‚¹${max}`;\n            } else if (grant.amount) {\n                amountDisplay = grant.amount;\n            } else {\n                amountDisplay = \"Amount varies\";\n            }\n            response += `**${index + 1}. ${grant.title || \"Untitled Grant\"}** ${sourceIcon} (${grant.matchScore}% match)\\n`;\n            response += `ğŸ’° ${amountDisplay}\\n`;\n            response += `ğŸ›ï¸ Provider: ${grant.grantProvider || \"Not specified\"}\\n`;\n            if (grant.applicationDeadline) {\n                response += `ğŸ“… Deadline: ${new Date(grant.applicationDeadline).toLocaleDateString()}\\n`;\n            } else if (grant.source === \"myscheme\") {\n                response += `ğŸ“… Deadline: Check official website\\n`;\n            }\n            response += `âœ… Why this matches:\\n`;\n            grant.matchReasons.forEach((reason)=>{\n                response += `   â€¢ ${reason}\\n`;\n            });\n            if (grant.applicationUrl) {\n                response += `ğŸ”— Apply: ${grant.applicationUrl}\\n`;\n            }\n            response += `\\n`;\n        });\n        response += `\\nğŸ“‹ **Next Steps:**\\n\\n`;\n        response += `1. **Review Details**: Check the full grant details and official websites\\n`;\n        response += `2. **Verify Eligibility**: Confirm your school meets all criteria\\n`;\n        response += `3. **Prepare Documents**: Gather required documents (school registration, UDISE, financial statements, etc.)\\n`;\n        response += `4. **Apply Online**: Visit the official portal links provided\\n`;\n        response += `5. **Track Application**: Keep your reference number and follow up regularly\\n\\n`;\n        response += `ğŸ’¡ **Need help with application?** Ask me \"How do I apply for [grant name]?\" and I'll provide step-by-step guidance!\\n\\n`;\n        response += `ğŸŒ **MyScheme.gov.in Integration**: Real-time data from government schemes portal\\n`;\n        response += `ğŸ”— Visit your **Grants Discovery** page in the dashboard to see all details and application links.`;\n        return {\n            message: response,\n            type: \"grant_recommendations\",\n            grants: topGrants,\n            sources: {\n                local: matchedLocalGrants.length,\n                myscheme: matchedMySchemeGrants.length\n            }\n        };\n    } catch (error) {\n        console.error(\"Error generating recommendations:\", error);\n        return {\n            message: `I encountered an error while analyzing grants. Please try again or visit the Grants Discovery page in your dashboard.\r\n\r\nError details: ${error.message}`,\n            type: \"error\"\n        };\n    }\n}\nasync function POST(request) {\n    try {\n        const { message, context = {} } = await request.json();\n        // Generate response with context\n        const result = await generateResponse(message, context);\n        // If result has context, return it\n        if (result && typeof result === \"object\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(result);\n        }\n        // Otherwise return as simple message\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: result\n        });\n    } catch (error) {\n        console.error(\"Chatbot error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process message\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFCd0QsTUFBTTtRQUNSO0lBQ0Y7QUFDRjtBQUNPLGVBQWVvRSxLQUFLQyxPQUFPO0lBQ2hDLElBQUk7UUFDRixNQUFNLEVBQUU3SCxPQUFPLEVBQUV5RCxVQUFVLENBQUMsQ0FBQyxFQUFFLEdBQUcsTUFBTW9FLFFBQVFqSSxJQUFJO1FBRXBELGlDQUFpQztRQUNqQyxNQUFNa0ksU0FBUyxNQUFNNUUsaUJBQWlCbEQsU0FBU3lEO1FBRS9DLG1DQUFtQztRQUNuQyxJQUFJcUUsVUFBVSxPQUFPQSxXQUFXLFVBQVU7WUFDeEMsT0FBT3JKLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUFDa0k7UUFDM0I7UUFFQSxxQ0FBcUM7UUFDckMsT0FBT3JKLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUFDO1lBQUVJLFNBQVM4SDtRQUFPO0lBQzdDLEVBQUUsT0FBTy9ILE9BQU87UUFDZGYsUUFBUWUsS0FBSyxDQUFDLGtCQUFrQkE7UUFDaEMsT0FBT3RCLHFEQUFZQSxDQUFDbUIsSUFBSSxDQUN0QjtZQUFFRyxPQUFPO1lBQTZCZ0ksU0FBU2hJLE1BQU1DLE9BQU87UUFBQyxHQUM3RDtZQUFFUixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2dqdHMta2FybmF0YWthLXdlYnNpdGUvLi9hcHAvYXBpL2NoYXRib3Qvcm91dGUuanM/ZTg1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgY29ubmVjdERCIGZyb20gJ0AvbGliL21vbmdvZGInXHJcbmltcG9ydCBHcmFudCBmcm9tICdAL2xpYi9tb2RlbHMvR3JhbnQnXHJcblxyXG4vLyBNeVNjaGVtZS5nb3YuaW4gQVBJIGludGVncmF0aW9uXHJcbmNvbnN0IE1ZU0NIRU1FX0FQSV9CQVNFID0gJ2h0dHBzOi8vd3d3Lm15c2NoZW1lLmdvdi5pbi9hcGknXHJcblxyXG4vLyBGZXRjaCBhbGwgc2NoZW1lcyBmcm9tIE15U2NoZW1lLmdvdi5pblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaE15U2NoZW1lRGF0YSgpIHtcclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHNjaGVtZXMgZnJvbSBNeVNjaGVtZS5nb3YuaW4uLi4nKVxyXG4gICAgXHJcbiAgICAvLyBUcnkgdGhlIG1haW4gc2NoZW1lcyBlbmRwb2ludFxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtNWVNDSEVNRV9BUElfQkFTRX0vc2NoZW1lc2AsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ1VzZXItQWdlbnQnOiAnR0pUUy1LYXJuYXRha2EtR3JhbnQtQXNzaXN0YW50LzEuMCdcclxuICAgICAgfSxcclxuICAgICAgdGltZW91dDogMTAwMDBcclxuICAgIH0pXHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICBjb25zb2xlLmxvZyhgTXlTY2hlbWUgQVBJIHJldHVybmVkICR7cmVzcG9uc2Uuc3RhdHVzfSwgdHJ5aW5nIGFsdGVybmF0aXZlIGVuZHBvaW50Li4uYClcclxuICAgICAgXHJcbiAgICAgIC8vIFRyeSBhbHRlcm5hdGl2ZSBlbmRwb2ludFxyXG4gICAgICBjb25zdCBhbHRSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke01ZU0NIRU1FX0FQSV9CQVNFfS92MS9zY2hlbWVzL2FsbGAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAnVXNlci1BZ2VudCc6ICdHSlRTLUthcm5hdGFrYS1HcmFudC1Bc3Npc3RhbnQvMS4wJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZW91dDogMTAwMDBcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGlmICghYWx0UmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJvdGggZW5kcG9pbnRzIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXN9LCAke2FsdFJlc3BvbnNlLnN0YXR1c31gKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgYWx0UmVzcG9uc2UuanNvbigpXHJcbiAgICAgIHJldHVybiBkYXRhXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBmZXRjaGVkICR7ZGF0YT8uc2NoZW1lcz8ubGVuZ3RoIHx8IGRhdGE/Lmxlbmd0aCB8fCAndW5rbm93bid9IHNjaGVtZXMgZnJvbSBNeVNjaGVtZS5nb3YuaW5gKVxyXG4gICAgcmV0dXJuIGRhdGFcclxuICAgIFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBNeVNjaGVtZSBkYXRhOicsIGVycm9yLm1lc3NhZ2UpXHJcbiAgICBcclxuICAgIC8vIFJldHVybiBtb2NrIGRhdGEgc3RydWN0dXJlIGZvciBkZXZlbG9wbWVudC90ZXN0aW5nXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzY2hlbWVzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICdtb2NrLTEnLFxyXG4gICAgICAgICAgbmFtZTogJ1NhbWFncmEgU2hpa3NoYSBBYmhpeWFuJyxcclxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcHJlaGVuc2l2ZSBzY2hlbWUgZm9yIHNjaG9vbCBlZHVjYXRpb24gY292ZXJpbmcgaW5mcmFzdHJ1Y3R1cmUsIHRlYWNoZXIgdHJhaW5pbmcsIGFuZCBxdWFsaXR5IGltcHJvdmVtZW50JyxcclxuICAgICAgICAgIG1pbmlzdHJ5OiAnTWluaXN0cnkgb2YgRWR1Y2F0aW9uJyxcclxuICAgICAgICAgIGNhdGVnb3J5OiAnRWR1Y2F0aW9uJyxcclxuICAgICAgICAgIGJlbmVmaWNpYXJpZXM6IFsnU2Nob29scycsICdTdHVkZW50cycsICdUZWFjaGVycyddLFxyXG4gICAgICAgICAgYW1vdW50OiAnUnMgMiw5NCwyODMgY3JvcmUnLFxyXG4gICAgICAgICAgZWxpZ2liaWxpdHk6ICdHb3Zlcm5tZW50IGFuZCBhaWRlZCBzY2hvb2xzJyxcclxuICAgICAgICAgIGFwcGxpY2F0aW9uUHJvY2VzczogJ1Rocm91Z2ggc3RhdGUgZWR1Y2F0aW9uIGRlcGFydG1lbnQnLFxyXG4gICAgICAgICAgd2Vic2l0ZTogJ2h0dHBzOi8vc2FtYWdyYXNoaWtzaGEuaW4nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJ21vY2stMicsIFxyXG4gICAgICAgICAgbmFtZTogJ1BNIFNIUkkgU2Nob29scycsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1ByYWRoYW4gTWFudHJpIFNjaG9vbHMgZm9yIFJpc2luZyBJbmRpYSAtIE1vZGVsIHNjaG9vbHMgd2l0aCBtb2Rlcm4gaW5mcmFzdHJ1Y3R1cmUnLFxyXG4gICAgICAgICAgbWluaXN0cnk6ICdNaW5pc3RyeSBvZiBFZHVjYXRpb24nLFxyXG4gICAgICAgICAgY2F0ZWdvcnk6ICdFZHVjYXRpb24gSW5mcmFzdHJ1Y3R1cmUnLFxyXG4gICAgICAgICAgYmVuZWZpY2lhcmllczogWydTY2hvb2xzJ10sXHJcbiAgICAgICAgICBhbW91bnQ6ICdScyAyNywzNjAgY3JvcmUnLFxyXG4gICAgICAgICAgZWxpZ2liaWxpdHk6ICdTZWxlY3RlZCBnb3Zlcm5tZW50IHNjaG9vbHMnLFxyXG4gICAgICAgICAgYXBwbGljYXRpb25Qcm9jZXNzOiAnVGhyb3VnaCBvbmxpbmUgcG9ydGFsJyxcclxuICAgICAgICAgIHdlYnNpdGU6ICdodHRwczovL3Btc2hyaS5lZHVjYXRpb24uZ292LmluJ1xyXG4gICAgICAgIH1cclxuICAgICAgXVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gQ2FsY3VsYXRlIHNpbWlsYXJpdHkgYmV0d2VlbiBzY2hvb2wgbmVlZHMgYW5kIHNjaGVtZVxyXG5mdW5jdGlvbiBjYWxjdWxhdGVTY2hlbWVTaW1pbGFyaXR5KHNjaGVtZSwgc2Nob29sQW5zd2Vycykge1xyXG4gIGxldCBzY29yZSA9IDBcclxuICBsZXQgcmVhc29ucyA9IFtdXHJcbiAgXHJcbiAgY29uc3Qgc2NoZW1lVGV4dCA9IGAke3NjaGVtZS5uYW1lfSAke3NjaGVtZS5kZXNjcmlwdGlvbn0gJHtzY2hlbWUuY2F0ZWdvcnl9ICR7c2NoZW1lLmJlbmVmaWNpYXJpZXM/LmpvaW4oJyAnKX1gLnRvTG93ZXJDYXNlKClcclxuICBcclxuICAvLyBDYXRlZ29yeSBtYXRjaGluZ1xyXG4gIGlmIChzY2hvb2xBbnN3ZXJzLm5lZWQpIHtcclxuICAgIGNvbnN0IG5lZWRLZXl3b3JkcyA9IHtcclxuICAgICAgJ2luZnJhc3RydWN0dXJlJzogWydpbmZyYXN0cnVjdHVyZScsICdidWlsZGluZycsICdjb25zdHJ1Y3Rpb24nLCAnZmFjaWxpdHknLCAnY2xhc3Nyb29tJ10sXHJcbiAgICAgICdkaWdpdGFsJzogWydkaWdpdGFsJywgJ3RlY2hub2xvZ3knLCAnY29tcHV0ZXInLCAnaW50ZXJuZXQnLCAnc21hcnQnLCAnaWN0J10sXHJcbiAgICAgICdsYWJvcmF0b3J5JzogWydsYWJvcmF0b3J5JywgJ2xhYicsICdzY2llbmNlJywgJ2VxdWlwbWVudCcsICdhcHBhcmF0dXMnXSxcclxuICAgICAgJ2xpYnJhcnknOiBbJ2xpYnJhcnknLCAnYm9vaycsICdyZWFkaW5nJywgJ3Jlc291cmNlJywgJ2xlYXJuaW5nIG1hdGVyaWFsJ10sXHJcbiAgICAgICdzcG9ydHMnOiBbJ3Nwb3J0cycsICdwaHlzaWNhbCcsICdwbGF5Z3JvdW5kJywgJ2F0aGxldGljJywgJ2ZpdG5lc3MnXSxcclxuICAgICAgJ3RlYWNoZXInOiBbJ3RlYWNoZXInLCAndHJhaW5pbmcnLCAncHJvZmVzc2lvbmFsIGRldmVsb3BtZW50JywgJ2ZhY3VsdHknLCAnY2FwYWNpdHkgYnVpbGRpbmcnXSxcclxuICAgICAgJ2luY2x1c2l2ZSc6IFsnaW5jbHVzaXZlJywgJ3NwZWNpYWwgbmVlZHMnLCAnZGlzYWJpbGl0eScsICdhY2Nlc3NpYmxlJywgJ2N3c24nXSxcclxuICAgICAgJ3ZvY2F0aW9uYWwnOiBbJ3ZvY2F0aW9uYWwnLCAnc2tpbGwnLCAnZW1wbG95bWVudCcsICdqb2InLCAnY2FyZWVyJywgJ3RyYWluaW5nJ11cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qga2V5d29yZHMgPSBuZWVkS2V5d29yZHNbc2Nob29sQW5zd2Vycy5uZWVkXSB8fCBbXVxyXG4gICAgY29uc3QgbWF0Y2hlZEtleXdvcmRzID0ga2V5d29yZHMuZmlsdGVyKGtleXdvcmQgPT4gc2NoZW1lVGV4dC5pbmNsdWRlcyhrZXl3b3JkKSlcclxuICAgIFxyXG4gICAgaWYgKG1hdGNoZWRLZXl3b3Jkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHNjb3JlICs9IDQwXHJcbiAgICAgIHJlYXNvbnMucHVzaChgTWF0Y2hlcyB5b3VyICR7c2Nob29sQW5zd2Vycy5jYXRlZ29yeX0gbmVlZHMgKCR7bWF0Y2hlZEtleXdvcmRzLmpvaW4oJywgJyl9KWApXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEVkdWNhdGlvbi1zcGVjaWZpYyBtYXRjaGluZ1xyXG4gIGlmIChzY2hlbWVUZXh0LmluY2x1ZGVzKCdlZHVjYXRpb24nKSB8fCBzY2hlbWVUZXh0LmluY2x1ZGVzKCdzY2hvb2wnKSkge1xyXG4gICAgc2NvcmUgKz0gMjVcclxuICAgIHJlYXNvbnMucHVzaCgnRWR1Y2F0aW9uLWZvY3VzZWQgc2NoZW1lJylcclxuICB9XHJcbiAgXHJcbiAgLy8gR292ZXJubWVudCBzY2hlbWUgcHJlZmVyZW5jZVxyXG4gIGlmIChzY2hlbWUubWluaXN0cnkgfHwgc2NoZW1lVGV4dC5pbmNsdWRlcygnZ292ZXJubWVudCcpIHx8IHNjaGVtZVRleHQuaW5jbHVkZXMoJ21pbmlzdHJ5JykpIHtcclxuICAgIHNjb3JlICs9IDE1XHJcbiAgICByZWFzb25zLnB1c2goJ0dvdmVybm1lbnQgc2NoZW1lIC0gcmVsaWFibGUgZnVuZGluZycpXHJcbiAgfVxyXG4gIFxyXG4gIC8vIEluZnJhc3RydWN0dXJlIG1hdGNoaW5nXHJcbiAgaWYgKHNjaG9vbEFuc3dlcnMuaW5mcmFzdHJ1Y3R1cmUgPT09ICdsYWNraW5nJyAmJiBzY2hlbWVUZXh0LmluY2x1ZGVzKCdpbmZyYXN0cnVjdHVyZScpKSB7XHJcbiAgICBzY29yZSArPSAyMFxyXG4gICAgcmVhc29ucy5wdXNoKCdBZGRyZXNzZXMgaW5mcmFzdHJ1Y3R1cmUgZ2FwcycpXHJcbiAgfVxyXG4gIFxyXG4gIC8vIEJ1ZGdldCBjb25zaWRlcmF0aW9uIChpZiBhbW91bnQgaW5mbyBhdmFpbGFibGUpXHJcbiAgaWYgKHNjaGVtZS5hbW91bnQgJiYgc2Nob29sQW5zd2Vycy5idWRnZXQpIHtcclxuICAgIC8vIEV4dHJhY3QgbnVtZXJpYyB2YWx1ZSBmcm9tIGFtb3VudCBzdHJpbmdcclxuICAgIGNvbnN0IGFtb3VudE1hdGNoID0gc2NoZW1lLmFtb3VudC5tYXRjaCgvW1xcZCxdKy8pXHJcbiAgICBpZiAoYW1vdW50TWF0Y2gpIHtcclxuICAgICAgY29uc3Qgc2NoZW1lQW1vdW50ID0gcGFyc2VJbnQoYW1vdW50TWF0Y2hbMF0ucmVwbGFjZSgvLC9nLCAnJykpXHJcbiAgICAgIGlmIChzY2hlbWVBbW91bnQgPj0gc2Nob29sQW5zd2Vycy5idWRnZXQpIHtcclxuICAgICAgICBzY29yZSArPSAxMFxyXG4gICAgICAgIHJlYXNvbnMucHVzaCgnQWRlcXVhdGUgZnVuZGluZyBhbW91bnQnKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiB7XHJcbiAgICBzY29yZTogTWF0aC5taW4oc2NvcmUsIDEwMCksIC8vIENhcCBhdCAxMDAlXHJcbiAgICByZWFzb25zXHJcbiAgfVxyXG59XHJcblxyXG4vLyBMb2FkIGdvdmVybm1lbnQgZGF0YSBhYm91dCBHSlRTIHNjaG9vbHNcclxubGV0IGdqdHNEYXRhXHJcbnRyeSB7XHJcbiAgY29uc3QgZGF0YVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnZ2p0cy1nb3Zlcm5tZW50LWRhdGEuanNvbicpXHJcbiAgY29uc3QgZmlsZUNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMoZGF0YVBhdGgsICd1dGY4JylcclxuICBnanRzRGF0YSA9IEpTT04ucGFyc2UoZmlsZUNvbnRlbnQpXHJcbn0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBHSlRTIGRhdGE6JywgZXJyb3IpXHJcbiAgZ2p0c0RhdGEgPSB7IHNjaG9vbHM6IFtdLCBhYm91dDoge30sIGFkbWlzc2lvbnM6IHt9LCBjb3Vyc2VzOiB7fSwgZmFjaWxpdGllczoge30sIHBsYWNlbWVudHM6IHt9IH1cclxufVxyXG5cclxuLy8gRW5oYW5jZWQgY2hhdGJvdCB3aXRoIGNvbXByZWhlbnNpdmUga25vd2xlZGdlIGFuZCBncmFudHMgUSZBXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZSwgY29udmVyc2F0aW9uQ29udGV4dCA9IHt9KSB7XHJcbiAgY29uc3QgbG93ZXJNZXNzYWdlID0gbWVzc2FnZS50b0xvd2VyQ2FzZSgpXHJcbiAgXHJcbiAgLy8gQ2hlY2sgaWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBncmFudCBxdWVzdGlvbm5haXJlXHJcbiAgaWYgKGNvbnZlcnNhdGlvbkNvbnRleHQuaW5HcmFudFF1ZXN0aW9ubmFpcmUgJiYgY29udmVyc2F0aW9uQ29udGV4dC5zdGVwKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgcHJvY2Vzc0dyYW50UXVlc3Rpb25uYWlyZShtZXNzYWdlLCBjb252ZXJzYXRpb25Db250ZXh0LnN0ZXAsIGNvbnZlcnNhdGlvbkNvbnRleHQpXHJcbiAgfVxyXG5cclxuICAvLyBHcmFudHMtcmVsYXRlZCBxdWVyaWVzIC0gTkVXIEZFQVRVUkVcclxuICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9ncmFudHxmdW5kaW5nfGZpbmFuY2lhbCBzdXBwb3J0fG1vbmV5fGZ1bmR8YXBwbHl8YXBwbGljYXRpb24vKSkge1xyXG4gICAgLy8gQ2hlY2sgaWYgYXNraW5nIGFib3V0IGdyYW50c1xyXG4gICAgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvd2hhdCBncmFudHx3aGljaCBncmFudHxoZWxwLipjaG9vc2V8cmVjb21tZW5kLipncmFudHxmaW5kLipncmFudHxhdmFpbGFibGUgZ3JhbnR8Z3JhbnQuKmFwcGx5fGNob29zZS4qZ3JhbnQvKSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG1lc3NhZ2U6IGDwn46vIEkgY2FuIGhlbHAgeW91IGZpbmQgdGhlIHBlcmZlY3QgZ3JhbnQgZm9yIHlvdXIgc2Nob29sISBMZXQgbWUgYXNrIHlvdSBhIGZldyBxdWVzdGlvbnMgdG8gcmVjb21tZW5kIHRoZSBiZXN0IGdyYW50czpcclxuXHJcbioqUXVlc3Rpb24gMSBvZiA1OioqIFdoYXQgaXMgeW91ciBzY2hvb2wncyBwcmltYXJ5IG5lZWQgcmlnaHQgbm93P1xyXG5cclxuQSkg8J+Pl++4jyBJbmZyYXN0cnVjdHVyZSAoYnVpbGRpbmdzLCBjbGFzc3Jvb21zLCBmdXJuaXR1cmUpXHJcbkIpIPCfkrsgRGlnaXRhbC9UZWNobm9sb2d5IChjb21wdXRlcnMsIGludGVybmV0LCBzbWFydCBjbGFzc3Jvb21zKVxyXG5DKSDwn5SsIExhYm9yYXRvcnkgRXF1aXBtZW50IChzY2llbmNlIGxhYnMsIGVxdWlwbWVudClcclxuRCkg8J+TmiBMaWJyYXJ5ICYgTGVhcm5pbmcgUmVzb3VyY2VzXHJcbkUpIPCfj4MgU3BvcnRzIEZhY2lsaXRpZXNcclxuRikg8J+RqOKAjfCfj6sgVGVhY2hlciBUcmFpbmluZyAmIERldmVsb3BtZW50XHJcbkcpIOKZvyBJbmNsdXNpdmUgRWR1Y2F0aW9uIChzcGVjaWFsIG5lZWRzIHN1cHBvcnQpXHJcbkgpIPCfjpMgVm9jYXRpb25hbC9Ta2lsbCBEZXZlbG9wbWVudFxyXG5cclxuUGxlYXNlIHJlcGx5IHdpdGggdGhlIGxldHRlciAoQS1IKSBvciBkZXNjcmliZSB5b3VyIG5lZWQuYCxcclxuICAgICAgICB0eXBlOiAnZ3JhbnRfcXVlc3Rpb24nLFxyXG4gICAgICAgIHN0ZXA6IDEsXHJcbiAgICAgICAgY29udGV4dDoge1xyXG4gICAgICAgICAgaW5HcmFudFF1ZXN0aW9ubmFpcmU6IHRydWUsXHJcbiAgICAgICAgICBzdGVwOiAxLFxyXG4gICAgICAgICAgZ3JhbnRBbnN3ZXJzOiB7fVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEdlbmVyYWwgZ3JhbnRzIGluZm9ybWF0aW9uXHJcbiAgICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9ob3cgbWFueXxsaXN0LipncmFudHxhbGwgZ3JhbnR8YXZhaWxhYmxlIGdyYW50LykpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBg8J+SsCBXZSBoYXZlIGRpc2NvdmVyZWQgKioxMisgcmVhbCBnb3Zlcm5tZW50IGdyYW50cyoqIGF2YWlsYWJsZSBmb3IgR0pUUyBzY2hvb2xzOlxyXG5cclxuKirwn4yQIExJVkUgREFUQSBTT1VSQ0VTOioqXHJcbuKAoiBMb2NhbCBEYXRhYmFzZTogMTIgdmVyaWZpZWQgZ3JhbnRzXHJcbuKAoiBNeVNjaGVtZS5nb3YuaW46IFJlYWwtdGltZSBnb3Zlcm5tZW50IHNjaGVtZXMgKHVwZGF0ZWQgZGFpbHkpXHJcblxyXG4qKk1ham9yIFNjaGVtZXM6KipcclxuMS4g8J+Pm++4jyBTYW1hZ3JhIFNoaWtzaGEgQWJoaXlhbiAtIFJzIDIsOTQsMjgzIGNyb3JlIChjb21wcmVoZW5zaXZlIHNjaG9vbCBkZXZlbG9wbWVudClcclxuMi4g8J+OryBQTSBTSFJJIFNjaG9vbHMgLSBScyAyNywzNjAgY3JvcmUgKG1vZGVsIHNjaG9vbCB0cmFuc2Zvcm1hdGlvbilcclxuMy4g8J+Pl++4jyBLYXJuYXRha2EgSW5mcmFzdHJ1Y3R1cmUgR3JhbnQgLSBScyA4NTAgY3JvcmVcclxuXHJcbioqU3BlY2lmaWMgUHVycG9zZSBHcmFudHMgKFJzIDItMjAgbGFraCBwZXIgc2Nob29sKToqKlxyXG40LiDwn5K7IERpZ2l0YWwgRWR1Y2F0aW9uIEluZnJhc3RydWN0dXJlXHJcbjUuIPCfjb3vuI8gTWlkLURheSBNZWFsIEVuaGFuY2VtZW50XHJcbjYuIPCflKwgU2NpZW5jZSBMYWIgTW9kZXJuaXphdGlvblxyXG43LiDwn5OaIExpYnJhcnkgRGV2ZWxvcG1lbnRcclxuOC4g8J+PgyBTcG9ydHMgSW5mcmFzdHJ1Y3R1cmVcclxuOS4g8J+RqOKAjfCfj6sgVGVhY2hlciBUcmFpbmluZ1xyXG4xMC4g4pm/IEluY2x1c2l2ZSBFZHVjYXRpb24gU3VwcG9ydFxyXG4xMS4g8J+OkyBWb2NhdGlvbmFsIEVkdWNhdGlvblxyXG4xMi4g8J+UpyBTY2hvb2wgTWFpbnRlbmFuY2UgRnVuZFxyXG5cclxuKirwn5qAIE5FVyBGRUFUVVJFOioqIFJlYWwtdGltZSBpbnRlZ3JhdGlvbiB3aXRoIE15U2NoZW1lLmdvdi5pbiBwb3J0YWwgZm9yIGxhdGVzdCBnb3Zlcm5tZW50IHNjaGVtZXMhXHJcblxyXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBoZWxwIHlvdSBjaG9vc2UgdGhlIG1vc3Qgc3VpdGFibGUgZ3JhbnRzIGZvciB5b3VyIHNjaG9vbD8gSnVzdCBzYXkgXCJoZWxwIG1lIGNob29zZSBhIGdyYW50XCIgYW5kIEknbGwgYXNrIHlvdSBhIGZldyBxdWVzdGlvbnMhYCxcclxuICAgICAgICB0eXBlOiAnZ3JhbnRfaW5mbydcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFwcGxpY2F0aW9uIGhlbHBcclxuICAgIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL2hvdy4qYXBwbHl8YXBwbGljYXRpb24gcHJvY2Vzc3xhcHBseSBmb3J8c3RlcHMuKmFwcGx5LykpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBg8J+TnSAqKkdyYW50IEFwcGxpY2F0aW9uIFByb2Nlc3MgLSBHZW5lcmFsIFN0ZXBzOioqXHJcblxyXG4qKlN0ZXAgMTogSWRlbnRpZnkgU3VpdGFibGUgR3JhbnRzKipcclxu4oCiIFVzZSBvdXIgQUkgdG8gbWF0Y2ggeW91ciBzY2hvb2wncyBuZWVkcyB3aXRoIGF2YWlsYWJsZSBncmFudHNcclxu4oCiIENoZWNrIGVsaWdpYmlsaXR5IGNyaXRlcmlhIGNhcmVmdWxseVxyXG5cclxuKipTdGVwIDI6IFByZXBhcmUgRG9jdW1lbnRzKipcclxuQ29tbW9uIGRvY3VtZW50cyBuZWVkZWQ6XHJcbuKAoiBTY2hvb2wgcmVnaXN0cmF0aW9uIGNlcnRpZmljYXRlXHJcbuKAoiBVRElTRSBjb2RlXHJcbuKAoiBQcmV2aW91cyB5ZWFyJ3MgZmluYW5jaWFsIHN0YXRlbWVudHNcclxu4oCiIEluZnJhc3RydWN0dXJlIGFzc2Vzc21lbnQgcmVwb3J0XHJcbuKAoiBTdHVkZW50IGVucm9sbG1lbnQgZGF0YVxyXG7igKIgU3RhZmYgZGV0YWlsc1xyXG7igKIgQmFuayBhY2NvdW50IGluZm9ybWF0aW9uXHJcblxyXG4qKlN0ZXAgMzogT25saW5lIEFwcGxpY2F0aW9uKipcclxu4oCiIFZpc2l0IHRoZSBncmFudCBwcm92aWRlcidzIG9mZmljaWFsIHBvcnRhbFxyXG7igKIgQ3JlYXRlIGFjY291bnQvbG9naW5cclxu4oCiIEZpbGwgYXBwbGljYXRpb24gZm9ybSBhY2N1cmF0ZWx5XHJcbuKAoiBVcGxvYWQgcmVxdWlyZWQgZG9jdW1lbnRzXHJcbuKAoiBTdWJtaXQgYmVmb3JlIGRlYWRsaW5lXHJcblxyXG4qKlN0ZXAgNDogRm9sbG93LXVwKipcclxu4oCiIE5vdGUgeW91ciBhcHBsaWNhdGlvbiByZWZlcmVuY2UgbnVtYmVyXHJcbuKAoiBUcmFjayBhcHBsaWNhdGlvbiBzdGF0dXMgb25saW5lXHJcbuKAoiBSZXNwb25kIHRvIHF1ZXJpZXMgcHJvbXB0bHlcclxu4oCiIFByZXBhcmUgZm9yIHNpdGUgaW5zcGVjdGlvbiBpZiByZXF1aXJlZFxyXG5cclxuKipTdGVwIDU6IEdyYW50IFV0aWxpemF0aW9uKipcclxu4oCiIFVzZSBmdW5kcyBvbmx5IGZvciBhcHByb3ZlZCBwdXJwb3Nlc1xyXG7igKIgTWFpbnRhaW4gcHJvcGVyIGFjY291bnRzXHJcbuKAoiBTdWJtaXQgdXRpbGl6YXRpb24gY2VydGlmaWNhdGVzXHJcbuKAoiBLZWVwIGFsbCBiaWxscyBhbmQgcmVjZWlwdHNcclxuXHJcbvCfkqEgKipXYW50IHNwZWNpZmljIGd1aWRhbmNlPyoqIFRlbGwgbWUgd2hpY2ggZ3JhbnQgeW91J3JlIGludGVyZXN0ZWQgaW4sIGFuZCBJJ2xsIHByb3ZpZGUgZGV0YWlsZWQgYXBwbGljYXRpb24gc3RlcHMgYW5kIHJlcXVpcmVkIGRvY3VtZW50cyFgLFxyXG4gICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbl9oZWxwJ1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBHcmVldGluZ3NcclxuICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9eKGhlbGxvfGhpfGhleXxncmVldGluZ3N8Z29vZCBtb3JuaW5nfGdvb2QgYWZ0ZXJub29ufGdvb2QgZXZlbmluZykkL2kpKSB7XHJcbiAgICByZXR1cm4gYEhlbGxvISBJJ20geW91ciBHSlRTIEthcm5hdGFrYSBBc3Npc3RhbnQuIEkgaGF2ZSBjb21wcmVoZW5zaXZlIGtub3dsZWRnZSBhYm91dCBhbGwgNiBHb3Zlcm5tZW50IEp1bmlvciBUZWNobmljYWwgU2Nob29scyBpbiBLYXJuYXRha2EuIEkgY2FuIGhlbHAgeW91IHdpdGg6XHJcblxyXG7wn5OaIEFkbWlzc2lvbnMgJiBFbGlnaWJpbGl0eVxyXG7wn46TIENvdXJzZXMgJiBDdXJyaWN1bHVtXHJcbvCfj6sgU2Nob29sIExvY2F0aW9ucyAmIEZhY2lsaXRpZXNcclxu8J+SvCBQbGFjZW1lbnRzICYgQ2FyZWVyIFBhdGhzXHJcbvCfkrAgU2Nob2xhcnNoaXBzICYgRmluYW5jaWFsIEFpZFxyXG7wn6SdIFF1ZXN0IEdsb2JhbCBQYXJ0bmVyc2hpcFxyXG7wn5GlIEFsdW1uaSBOZXR3b3JrXHJcbvCfjq8gKipORVc6IEdyYW50IERpc2NvdmVyeSAmIEFwcGxpY2F0aW9uIEhlbHAqKlxyXG5cclxuV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBrbm93P2BcclxuICB9XHJcblxyXG4gIC8vIEFib3V0IEdKVFNcclxuICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC93aGF0IGlzfGFib3V0fHRlbGwgbWUgYWJvdXR8aW5mb3JtYXRpb24gYWJvdXQvKSAmJiBsb3dlck1lc3NhZ2UubWF0Y2goL2dqdHN8Z292ZXJubWVudCBqdW5pb3IgdGVjaG5pY2FsLykpIHtcclxuICAgIHJldHVybiBgR292ZXJubWVudCBKdW5pb3IgVGVjaG5pY2FsIFNjaG9vbHMgKEdKVFMpIGFyZSBzcGVjaWFsaXplZCB0ZWNobmljYWwgZWR1Y2F0aW9uIGluc3RpdHV0aW9ucyBpbiBLYXJuYXRha2EgbWFuYWdlZCBieSB0aGUgRGVwYXJ0bWVudCBvZiBUZWNobmljYWwgRWR1Y2F0aW9uLlxyXG5cclxu8J+OryBLZXkgRmFjdHM6XHJcbuKAoiBFc3RhYmxpc2hlZDogMjAxMyAoc3RhcnRlZCB3aXRoIEh1YmJhbGxpLCBleHBhbmRlZCB0byA2IHNjaG9vbHMgaW4gMjAyMylcclxu4oCiIFRvdGFsIFNjaG9vbHM6IDYgY2FtcHVzZXMgYWNyb3NzIEthcm5hdGFrYVxyXG7igKIgVG90YWwgU3R1ZGVudHM6IDgwMCsgc3R1ZGVudHNcclxu4oCiIEdyYWRlczogOHRoIHRvIDEwdGggc3RhbmRhcmRcclxu4oCiIFBhcnRuZXJzaGlwOiBRdWVzdCBHbG9iYWwgJiBVdGhpc2h0YSBOR09cclxu4oCiIFBsYWNlbWVudCBSYXRlOiA3MCUgZm9yIGVuZ2luZWVyaW5nIGdyYWR1YXRlc1xyXG7igKIgQWRtaXNzaW9uIEdyb3d0aDogMTclIHllYXItb24teWVhclxyXG5cclxu8J+OkyBNaXNzaW9uOiBQcm92aWRlIHF1YWxpdHkgdGVjaG5pY2FsIGVkdWNhdGlvbiB0byBzdHVkZW50cyBmcm9tIGVjb25vbWljYWxseSB3ZWFrZXIgc2VjdGlvbnMgYW5kIHByZXBhcmUgdGhlbSBmb3IgdGVjaG5pY2FsIGNhcmVlcnMuXHJcblxyXG5UaGUgaW5pdGlhdGl2ZSBoYXMgYmVlbiBzdXBwb3J0ZWQgYnkgUXVlc3QgR2xvYmFsIGZvciBvdmVyIGEgZGVjYWRlLCBwcm92aWRpbmcgaW5mcmFzdHJ1Y3R1cmUsIHNjaG9sYXJzaGlwcywgYW5kIGNhcmVlciBwYXRod2F5cy5gXHJcbiAgfVxyXG5cclxuICAvLyBTY2hvb2xzIGluZm9ybWF0aW9uXHJcbiAgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnc2Nob29sJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdjYW1wdXMnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2xvY2F0aW9uJykpIHtcclxuICAgIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2hvdyBtYW55JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdsaXN0JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdhbGwnKSkge1xyXG4gICAgICByZXR1cm4gYFdlIGhhdmUgNiBHSlRTIGNhbXB1c2VzIGFjcm9zcyBLYXJuYXRha2E6XHJcblxyXG4xLiDwn4+rIEdKVFMgQmFsbGFyaSAoRXN0LiAyMDEzKSAtIDE1MCBzdHVkZW50c1xyXG4gICBEaXN0cmljdDogQmFsbGFyaSB8IENvdXJzZXM6IEVsZWN0cm9uaWNzLCBNZWNoYW5pY2FsLCBDb21wdXRlciBTY2llbmNlXHJcblxyXG4yLiDwn4+rIEdKVFMgQmhhZHJhdmF0aSAoRXN0LiAyMDIzKSAtIDE0MCBzdHVkZW50c1xyXG4gICBEaXN0cmljdDogU2hpdmFtb2dnYSB8IENvdXJzZXM6IEVsZWN0cm9uaWNzLCBNZWNoYW5pY2FsLCBFbGVjdHJpY2FsXHJcbiAgIEZhY2lsaXRpZXM6IEhvc3RlbCBhdmFpbGFibGVcclxuXHJcbjMuIPCfj6sgR0pUUyBIdWJiYWxsaSAoRXN0LiAyMDEzKSAtIDE2MCBzdHVkZW50c1xyXG4gICBEaXN0cmljdDogRGhhcndhZCB8IENvdXJzZXM6IEVsZWN0cm9uaWNzLCBNZWNoYW5pY2FsLCBDb21wdXRlciBTY2llbmNlXHJcbiAgIEFjaGlldmVtZW50OiBIaWdoZXN0IHBsYWNlbWVudCByYXRlLCBSb2JvdGljcyB3aW5uZXJzXHJcblxyXG40LiDwn4+rIEdKVFMgQmFnYWxrb3QgKEVzdC4gMjAyMykgLSAxMzUgc3R1ZGVudHNcclxuICAgRGlzdHJpY3Q6IEJhZ2Fsa290IHwgQ291cnNlczogRWxlY3Ryb25pY3MsIE1lY2hhbmljYWxcclxuXHJcbjUuIPCfj6sgR0pUUyBLYWxidXJnaSAoRXN0LiAyMDIzKSAtIDE0NSBzdHVkZW50c1xyXG4gICBEaXN0cmljdDogS2FsYWJ1cmFnaSB8IENvdXJzZXM6IEVsZWN0cm9uaWNzLCBNZWNoYW5pY2FsLCBDb21wdXRlciBTY2llbmNlXHJcbiAgIEZhY2lsaXRpZXM6IEhvc3RlbCBhdmFpbGFibGVcclxuXHJcbjYuIPCfj6sgR0pUUyBNYW5nYWxvcmUgKEVzdC4gMjAyMykgLSAxNTUgc3R1ZGVudHNcclxuICAgRGlzdHJpY3Q6IERha3NoaW5hIEthbm5hZGEgfCBDb3Vyc2VzOiBFbGVjdHJvbmljcywgTWVjaGFuaWNhbCwgRWxlY3RyaWNhbFxyXG5cclxuRWFjaCBzY2hvb2wgb2ZmZXJzIHF1YWxpdHkgdGVjaG5pY2FsIGVkdWNhdGlvbiB3aXRoIG1vZGVybiBmYWNpbGl0aWVzIWBcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU3BlY2lmaWMgc2Nob29sIHF1ZXJpZXNcclxuICAgIGNvbnN0IHNjaG9vbE5hbWVzID0gWydiYWxsYXJpJywgJ2JoYWRyYXZhdGknLCAnaHViYmFsbGknLCAnYmFnYWxrb3QnLCAna2FsYnVyZ2knLCAnbWFuZ2Fsb3JlJ11cclxuICAgIGZvciAoY29uc3Qgc2Nob29sTmFtZSBvZiBzY2hvb2xOYW1lcykge1xyXG4gICAgICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKHNjaG9vbE5hbWUpKSB7XHJcbiAgICAgICAgY29uc3Qgc2Nob29sID0gZ2p0c0RhdGEuc2Nob29scy5maW5kKHMgPT4gcy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2Nob29sTmFtZSkpXHJcbiAgICAgICAgaWYgKHNjaG9vbCkge1xyXG4gICAgICAgICAgcmV0dXJuIGDwn5ONICR7c2Nob29sLm5hbWV9XHJcblxyXG7wn4+b77iPIExvY2F0aW9uOiAke3NjaG9vbC5sb2NhdGlvbn0sICR7c2Nob29sLmRpc3RyaWN0fSBEaXN0cmljdFxyXG7wn5OFIEVzdGFibGlzaGVkOiAke3NjaG9vbC5lc3RhYmxpc2hlZH1cclxu8J+RpSBTdHVkZW50czogJHtzY2hvb2wuc3R1ZGVudHN9XHJcbvCfk6cgRW1haWw6ICR7c2Nob29sLmVtYWlsfVxyXG7wn5OeIFBob25lOiAke3NjaG9vbC5waG9uZX1cclxu8J+TriBBZGRyZXNzOiAke3NjaG9vbC5hZGRyZXNzfVxyXG5cclxu8J+TmiBDb3Vyc2VzIE9mZmVyZWQ6XHJcbiR7c2Nob29sLmNvdXJzZXMubWFwKGMgPT4gYOKAoiAke2N9YCkuam9pbignXFxuJyl9XHJcblxyXG7wn4+X77iPIEZhY2lsaXRpZXM6XHJcbiR7c2Nob29sLmZhY2lsaXRpZXMubWFwKGYgPT4gYOKAoiAke2Z9YCkuam9pbignXFxuJyl9XHJcblxyXG7wn4+GIEFjaGlldmVtZW50czpcclxuJHtzY2hvb2wuYWNoaWV2ZW1lbnRzLm1hcChhID0+IGDigKIgJHthfWApLmpvaW4oJ1xcbicpfVxyXG5cclxuV291bGQgeW91IGxpa2UgdG8ga25vdyBtb3JlIGFib3V0IGFkbWlzc2lvbnMgb3IgY291cnNlcz9gXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBBZG1pc3Npb25zXHJcbiAgaWYgKGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnYWRtaXNzaW9uJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdhcHBseScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZW5yb2xsJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdlbGlnaWJpbGl0eScpKSB7XHJcbiAgICByZXR1cm4gYPCfk50gR0pUUyBBZG1pc3Npb25zIEluZm9ybWF0aW9uXHJcblxyXG7inIUgRWxpZ2liaWxpdHk6XHJcbuKAoiBTdHVkZW50cyB3aG8gaGF2ZSBjb21wbGV0ZWQgN3RoIHN0YW5kYXJkXHJcbuKAoiBBZ2U6IDEzLTE1IHllYXJzXHJcbuKAoiBPcGVuIHRvIGFsbCBzdHVkZW50cywgcHJpb3JpdHkgZm9yIGVjb25vbWljYWxseSB3ZWFrZXIgc2VjdGlvbnNcclxuXHJcbvCfk4sgQXBwbGljYXRpb24gUHJvY2VzczpcclxuMS4gT25saW5lIGFwcGxpY2F0aW9uIHRocm91Z2ggb2ZmaWNpYWwgd2Vic2l0ZVxyXG4yLiBFbnRyYW5jZSBleGFtaW5hdGlvblxyXG4zLiBNZXJpdC1iYXNlZCBzZWxlY3Rpb25cclxuNC4gRG9jdW1lbnQgdmVyaWZpY2F0aW9uXHJcbjUuIEZpbmFsIGFkbWlzc2lvblxyXG5cclxu8J+ThCBSZXF1aXJlZCBEb2N1bWVudHM6XHJcbuKAoiA3dGggc3RhbmRhcmQgbWFya3MgY2FyZFxyXG7igKIgVHJhbnNmZXIgY2VydGlmaWNhdGVcclxu4oCiIENhc3RlIGNlcnRpZmljYXRlIChpZiBhcHBsaWNhYmxlKVxyXG7igKIgSW5jb21lIGNlcnRpZmljYXRlXHJcbuKAoiBBYWRoYXIgY2FyZFxyXG7igKIgUGFzc3BvcnQgc2l6ZSBwaG90b2dyYXBoc1xyXG5cclxu8J+SsCBGZWVzOiBNaW5pbWFsIGZlZXMgd2l0aCBleHRlbnNpdmUgc2Nob2xhcnNoaXAgc3VwcG9ydFxyXG5cclxu8J+TiCBSZWNlbnQgQWNoaWV2ZW1lbnQ6IDE3JSBpbmNyZWFzZSBpbiBhZG1pc3Npb25zIGR1ZSB0byBpbXByb3ZlZCBmYWNpbGl0aWVzIGFuZCBvdXRjb21lcyFcclxuXHJcbkZvciBzcGVjaWZpYyBzY2hvb2wgYWRtaXNzaW9ucywgcGxlYXNlIGNvbnRhY3QgdGhlIHNjaG9vbCBkaXJlY3RseSBvciB2aXNpdCBvdXIgQWRtaXNzaW9ucyBwYWdlLmBcclxuICB9XHJcblxyXG4gIC8vIENvdXJzZXNcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdjb3Vyc2UnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3N1YmplY3QnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3N0cmVhbScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnY3VycmljdWx1bScpKSB7XHJcbiAgICByZXR1cm4gYPCfjpMgR0pUUyBDb3Vyc2VzICYgQ3VycmljdWx1bVxyXG5cclxu4o+x77iPIER1cmF0aW9uOiAzIHllYXJzIChHcmFkZSA4IHRvIEdyYWRlIDEwKVxyXG7wn5OaIEJvYXJkOiBLYXJuYXRha2EgU3RhdGUgQm9hcmQgd2l0aCB0ZWNobmljYWwgc3ViamVjdHNcclxuXHJcbvCflKcgVGVjaG5pY2FsIFN0cmVhbXM6XHJcblxyXG4xLiDwn5OhIEVsZWN0cm9uaWNzXHJcbiAgIOKAoiBCYXNpYyBlbGVjdHJvbmljcyAmIGNpcmN1aXRzXHJcbiAgIOKAoiBEaWdpdGFsIGVsZWN0cm9uaWNzXHJcbiAgIOKAoiBQcmFjdGljYWwgdHJhaW5pbmdcclxuICAgQ2FyZWVyOiBFbGVjdHJvbmljcyBUZWNobmljaWFuLCBNYWludGVuYW5jZSBFbmdpbmVlclxyXG5cclxuMi4g4pqZ77iPIE1lY2hhbmljYWwgRW5naW5lZXJpbmdcclxuICAg4oCiIFdvcmtzaG9wIHByYWN0aWNlXHJcbiAgIOKAoiBNYWNoaW5lIHRvb2xzICYgZml0dGluZ1xyXG4gICDigKIgV2VsZGluZyAmIG1lY2hhbmljYWwgc3lzdGVtc1xyXG4gICBDYXJlZXI6IE1lY2hhbmljYWwgVGVjaG5pY2lhbiwgUHJvZHVjdGlvbiBBc3Npc3RhbnRcclxuXHJcbjMuIPCfkrsgQ29tcHV0ZXIgU2NpZW5jZVxyXG4gICDigKIgUHJvZ3JhbW1pbmcgYmFzaWNzXHJcbiAgIOKAoiBDb21wdXRlciBoYXJkd2FyZSAmIHNvZnR3YXJlXHJcbiAgIOKAoiBXZWIgZGV2ZWxvcG1lbnRcclxuICAgQ2FyZWVyOiBJVCBTdXBwb3J0LCBKdW5pb3IgUHJvZ3JhbW1lclxyXG5cclxuNC4g4pqhIEVsZWN0cmljYWwgRW5naW5lZXJpbmdcclxuICAg4oCiIEVsZWN0cmljYWwgY2lyY3VpdHMgJiB3aXJpbmdcclxuICAg4oCiIE1vdG9ycyAmIGdlbmVyYXRvcnNcclxuICAg4oCiIFBvd2VyIHN5c3RlbXNcclxuICAgQ2FyZWVyOiBFbGVjdHJpY2FsIFRlY2huaWNpYW4sIFdpcmVtYW5cclxuXHJcbkFsbCBjb3Vyc2VzIGluY2x1ZGUgaGFuZHMtb24gdHJhaW5pbmcgd2l0aCBtb2Rlcm4gZXF1aXBtZW50IGFuZCBleHBlcmllbmNlZCBmYWN1bHR5IWBcclxuICB9XHJcblxyXG4gIC8vIEZhY2lsaXRpZXNcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdmYWNpbGl0JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdpbmZyYXN0cnVjdHVyZScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnbGFiJykpIHtcclxuICAgIHJldHVybiBg8J+Pl++4jyBHSlRTIEZhY2lsaXRpZXMgJiBJbmZyYXN0cnVjdHVyZVxyXG5cclxuVGhhbmtzIHRvIFF1ZXN0IEdsb2JhbCdzIHN1cHBvcnQsIG91ciBzY2hvb2xzIGhhdmUgbW9kZXJuIGZhY2lsaXRpZXM6XHJcblxyXG7wn5SsIEFjYWRlbWljIEZhY2lsaXRpZXM6XHJcbuKAoiBXZWxsLWVxdWlwcGVkIHNjaWVuY2UgbGFib3JhdG9yaWVzXHJcbuKAoiBNb2Rlcm4gY29tcHV0ZXIgbGFicyB3aXRoIGludGVybmV0XHJcbuKAoiBUZWNobmljYWwgd29ya3Nob3BzIHdpdGggbGF0ZXN0IGVxdWlwbWVudFxyXG7igKIgV2VsbC1zdG9ja2VkIGxpYnJhcmllc1xyXG7igKIgU21hcnQgY2xhc3Nyb29tcyB3aXRoIGRpZ2l0YWwgbGVhcm5pbmcgdG9vbHNcclxuXHJcbvCfj4MgT3RoZXIgRmFjaWxpdGllczpcclxu4oCiIFNwb3J0cyBmYWNpbGl0aWVzIGFuZCBwbGF5Z3JvdW5kc1xyXG7igKIgU2VwYXJhdGUgaG9zdGVscyBmb3IgYm95cyBhbmQgZ2lybHMgKEJoYWRyYXZhdGksIEthbGJ1cmdpLCBNYW5nYWxvcmUpXHJcbuKAoiBUcmFuc3BvcnRhdGlvbiBmYWNpbGl0aWVzXHJcbuKAoiBNZWRpY2FsIGZhY2lsaXRpZXNcclxu4oCiIE51dHJpdGlvdXMgbWlkLWRheSBtZWFsc1xyXG5cclxu8J+OgSBGcmVlIFByb3Zpc2lvbnMgZm9yIEFsbCBTdHVkZW50czpcclxu4oCiIFVuaWZvcm1zXHJcbuKAoiBTY2hvb2wgYmFnc1xyXG7igKIgVG9vbCBraXRzXHJcbuKAoiBUZXh0Ym9va3Ncclxu4oCiIFNwb3J0cyBtYXRlcmlhbHNcclxuXHJcblJlY2VudCBVcGdyYWRlcyAoMjAyMy0yMDI2KTpcclxu4oCiIEFsbC1pbi1vbmUgZGVza3RvcCB1bml0cyB3aXRoIE1TIE9mZmljZVxyXG7igKIgSW5mcmFzdHJ1Y3R1cmUgdXBncmFkZXMgKGRlc2tzLCBiZW5jaGVzLCBib29rIHJhY2tzKVxyXG7igKIgV2F0ZXJwcm9vZmluZyBhbmQgcGFpbnRpbmdcclxu4oCiIERpZ2l0YWwgbGl0ZXJhY3kgdHJhaW5pbmcgZm9yIGZhY3VsdHlgXHJcbiAgfVxyXG5cclxuICAvLyBQbGFjZW1lbnQgJiBDYXJlZXJcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdwbGFjZW1lbnQnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2pvYicpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnY2FyZWVyJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdlbXBsb3ltZW50JykpIHtcclxuICAgIHJldHVybiBg8J+SvCBHSlRTIFBsYWNlbWVudHMgJiBDYXJlZXIgT3V0Y29tZXNcclxuXHJcbvCfjq8gSW1wcmVzc2l2ZSBSZXN1bHRzOlxyXG7igKIgNzAlIHBsYWNlbWVudCByYXRlIGZvciBlbmdpbmVlcmluZyBncmFkdWF0ZXNcclxu4oCiIE1hbnkgZ3JhZHVhdGVzIHdvcmsgd2l0aCBsZWFkaW5nIHRlY2hub2xvZ3kgZmlybXMgaW5jbHVkaW5nIFF1ZXN0IEdsb2JhbFxyXG7igKIgU3Ryb25nIGVkdWNhdGlvbi10by1lbXBsb3ltZW50IHBhdGh3YXlcclxuXHJcbvCfpJ0gSW5kdXN0cnkgUGFydG5lcnM6XHJcbuKAoiBRdWVzdCBHbG9iYWwgKHByaW1hcnkgcGFydG5lcilcclxu4oCiIEJvc2NoXHJcbuKAoiBUb3lvdGFcclxu4oCiIEluZm9zeXNcclxu4oCiIFRDU1xyXG7igKIgTG9jYWwgaW5kdXN0cmllc1xyXG5cclxu8J+TiCBDYXJlZXIgU3VwcG9ydDpcclxu4oCiIENhcmVlciBjb3Vuc2VsaW5nXHJcbuKAoiBTa2lsbCBkZXZlbG9wbWVudCB3b3Jrc2hvcHNcclxu4oCiIEluZHVzdHJ5IHZpc2l0c1xyXG7igKIgSW50ZXJuc2hpcCBvcHBvcnR1bml0aWVzXHJcbuKAoiBQbGFjZW1lbnQgYXNzaXN0YW5jZVxyXG7igKIgSGlnaGVyIGVkdWNhdGlvbiBndWlkYW5jZVxyXG5cclxu8J+OkyBDYXJlZXIgUGF0aHdheXMgQWZ0ZXIgMTB0aDpcclxuMS4gRGlyZWN0IGVtcGxveW1lbnQgaW4gdGVjaG5pY2FsIHJvbGVzXHJcbjIuIERpcGxvbWEgY291cnNlcyB0aHJvdWdoIGxhdGVyYWwgZW50cnlcclxuMy4gRW5naW5lZXJpbmcgZGVncmVlcyB0aHJvdWdoIERDRVQgKHdpdGggUXVlc3QgR2xvYmFsIHNjaG9sYXJzaGlwcylcclxuNC4gSVRJIGNvdXJzZXNcclxuNS4gRW50cmVwcmVuZXVyc2hpcFxyXG5cclxuU3VjY2VzcyBTdG9yeTogU3R1ZGVudHMgd2hvIHJlY2VpdmUgRENFVCBzY2hvbGFyc2hpcHMgYW5kIGNvbXBsZXRlIGVuZ2luZWVyaW5nIGhhdmUgNzAlIGVtcGxveW1lbnQgcmF0ZSB3aXRoIHRvcCB0ZWNoIGZpcm1zIWBcclxuICB9XHJcblxyXG4gIC8vIFNjaG9sYXJzaGlwc1xyXG4gIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3NjaG9sYXJzaGlwJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdmaW5hbmNpYWwnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2ZlZXMnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2Nvc3QnKSkge1xyXG4gICAgcmV0dXJuIGDwn5KwIEdKVFMgU2Nob2xhcnNoaXBzICYgRmluYW5jaWFsIFN1cHBvcnRcclxuXHJcblF1ZXN0IEdsb2JhbCBwcm92aWRlcyBleHRlbnNpdmUgc2Nob2xhcnNoaXAgc3VwcG9ydDpcclxuXHJcbvCfj4YgTWVyaXQtQmFzZWQgU2Nob2xhcnNoaXBzOlxyXG7igKIgRm9yIHRvcC1wZXJmb3JtaW5nIHN0dWRlbnRzIGluIGdyYWRlcyA4LTEwXHJcbuKAoiBBdmFpbGFibGUgYWNyb3NzIGFsbCBzaXggR0pUUyBjYW1wdXNlc1xyXG7igKIgQ292ZXJzIHR1aXRpb24gYW5kIGxlYXJuaW5nIG1hdGVyaWFsc1xyXG5cclxu8J+OkyBIaWdoZXIgRWR1Y2F0aW9uIFNjaG9sYXJzaGlwczpcclxu4oCiIEZvciBKVFMgYWx1bW5pIHB1cnN1aW5nIEVuZ2luZWVyaW5nIGRlZ3JlZXNcclxu4oCiIEF2YWlsYWJsZSBmb3Igc3R1ZGVudHMgcXVhbGlmeWluZyB0aHJvdWdoIERDRVQgKERpcGxvbWEgQ29tbW9uIEVudHJhbmNlIFRlc3QpXHJcbuKAoiBDb3ZlcnMgZW5naW5lZXJpbmcgZWR1Y2F0aW9uIGNvc3RzXHJcblxyXG7wn5OLIEdvdmVybm1lbnQgU2Nob2xhcnNoaXBzOlxyXG7igKIgU0MvU1Qgc2Nob2xhcnNoaXBzXHJcbuKAoiBNaW5vcml0eSBzY2hvbGFyc2hpcHNcclxu4oCiIEVXUyAoRWNvbm9taWNhbGx5IFdlYWtlciBTZWN0aW9uKSBzdXBwb3J0XHJcbuKAoiBPQkMgc2Nob2xhcnNoaXBzXHJcblxyXG7wn5K1IEZlZSBTdHJ1Y3R1cmU6XHJcbuKAoiBNaW5pbWFsIGZlZXMgZm9yIEdKVFMgZWR1Y2F0aW9uXHJcbuKAoiBNb3N0IHN0dWRlbnRzIHJlY2VpdmUgZnVsbCBvciBwYXJ0aWFsIHNjaG9sYXJzaGlwIHN1cHBvcnRcclxu4oCiIEZyZWUgdW5pZm9ybXMsIGJvb2tzLCBiYWdzLCB0b29sIGtpdHMsIGFuZCBtZWFsc1xyXG5cclxu8J+TniBGb3Igc2Nob2xhcnNoaXAgYXBwbGljYXRpb25zLCBjb250YWN0IHlvdXIgbmVhcmVzdCBHSlRTIGNhbXB1cyBvciB2aXNpdCB0aGUgQWRtaXNzaW9ucyBwYWdlLmBcclxuICB9XHJcblxyXG4gIC8vIFF1ZXN0IEdsb2JhbCBQYXJ0bmVyc2hpcFxyXG4gIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3F1ZXN0JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdwYXJ0bmVyJykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCd1dGhpc2h0YScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnc3VwcG9ydCcpKSB7XHJcbiAgICByZXR1cm4gYPCfpJ0gUXVlc3QgR2xvYmFsIFBhcnRuZXJzaGlwXHJcblxyXG5RdWVzdCBHbG9iYWwsIHRoZSB3b3JsZCdzIGxhcmdlc3QgaW5kZXBlbmRlbnQgcHVyZS1wbGF5IGVuZ2luZWVyaW5nIHNlcnZpY2VzIGNvbXBhbnksIGhhcyBiZWVuIHN1cHBvcnRpbmcgR0pUUyBzY2hvb2xzIGZvciBvdmVyIGEgZGVjYWRlIHRocm91Z2ggdGhlaXIgXCJFZHVjYXRpb24gZm9yIFVuZGVyc2VydmVkXCIgaW5pdGlhdGl2ZSBpbiBjb2xsYWJvcmF0aW9uIHdpdGggTkdPIHBhcnRuZXIgVXRoaXNodGEuXHJcblxyXG7wn5OFIFRpbWVsaW5lOlxyXG7igKIgMjAxMzogU3RhcnRlZCB3aXRoIHNpbmdsZSBzY2hvb2wgaW4gSHViYmFsbGlcclxu4oCiIDIwMjM6IEV4cGFuZGVkIHRvIGFsbCA2IEdKVFMgaW5zdGl0dXRpb25zXHJcbuKAoiAyMDI2OiBDb250aW51aW5nIHN0cm9uZyBzdXBwb3J0IGFuZCBncm93dGhcclxuXHJcbvCfkqEgUXVlc3QgR2xvYmFsJ3MgQ29udHJpYnV0aW9uczpcclxu4oCiIEluZnJhc3RydWN0dXJlIGRldmVsb3BtZW50IChsYWJzLCBsaWJyYXJpZXMsIGZ1cm5pdHVyZSlcclxu4oCiIERpZ2l0YWwgbGl0ZXJhY3kgKGNvbXB1dGVycywgc29mdHdhcmUsIHRyYWluZWQgZmFjdWx0eSlcclxu4oCiIExlYXJuaW5nIHJlc291cmNlcyBhbmQgdGVjaG5vbG9neSBhY2Nlc3Ncclxu4oCiIE1lcml0LWJhc2VkIHNjaG9sYXJzaGlwcyBmb3IgZ3JhZGVzIDgtMTBcclxu4oCiIERDRVQgc2Nob2xhcnNoaXBzIGZvciBlbmdpbmVlcmluZyBhc3BpcmFudHNcclxu4oCiIFNraWxscyBkZXZlbG9wbWVudCB3b3Jrc2hvcHNcclxu4oCiIENhcmVlciBjb3Vuc2VsaW5nIGFuZCBwbGFjZW1lbnQgc3VwcG9ydFxyXG5cclxu8J+TiiBJbXBhY3Q6XHJcbuKAoiA4MDArIHN0dWRlbnRzIGRpcmVjdGx5IGJlbmVmaXRlZFxyXG7igKIgMTclIGluY3JlYXNlIGluIGFkbWlzc2lvbnNcclxu4oCiIEltcHJvdmVkIGF0dGVuZGFuY2UgcmF0ZXNcclxu4oCiIDcwJSBwbGFjZW1lbnQgcmF0ZSBmb3IgZW5naW5lZXJpbmcgZ3JhZHVhdGVzXHJcbuKAoiBNYW55IGFsdW1uaSBub3cgd29yayBhdCBRdWVzdCBHbG9iYWxcclxuXHJcbvCfjq8gTWlzc2lvbjogQ3JlYXRlIGxvbmctdGVybSB2YWx1ZSB0aHJvdWdoIGVkdWNhdGlvbiBhbmQgc2tpbGwgZGV2ZWxvcG1lbnQsIG9wZW5pbmcgZG9vcnMgZm9yIHN0dWRlbnRzIGZyb20gdW5kZXJzZXJ2ZWQgY29tbXVuaXRpZXMuXHJcblxyXG5cIkJ5IHN0cmVuZ3RoZW5pbmcgSnVuaW9yIFRlY2huaWNhbCBTY2hvb2xzIGFuZCBjcmVhdGluZyBjbGVhciBwYXRod2F5cyB0byBoaWdoZXIgZWR1Y2F0aW9uLCB3ZSBhcmUgc2hhcGluZyB0aGUgZnV0dXJlIG9mIEluZGlhJ3MgZW5naW5lZXJpbmcgdGFsZW50LlwiIC0gQWppdCBQcmFiaHUsIENvLWZvdW5kZXIgJiBDRU8sIFF1ZXN0IEdsb2JhbGBcclxuICB9XHJcblxyXG4gIC8vIEFsdW1uaVxyXG4gIGlmIChsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2FsdW1uaScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZ3JhZHVhdGUnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2Zvcm1lciBzdHVkZW50JykpIHtcclxuICAgIHJldHVybiBg8J+RpSBHSlRTIEFsdW1uaSBOZXR3b3JrXHJcblxyXG5PdXIgYWx1bW5pIG5ldHdvcmsgaXMgZ3Jvd2luZyBzdHJvbmcgd2l0aCBpbXByZXNzaXZlIG91dGNvbWVzIVxyXG5cclxu8J+TiiBBbHVtbmkgU3VjY2Vzczpcclxu4oCiIDcwJSBvZiBlbmdpbmVlcmluZyBncmFkdWF0ZXMgc2VjdXJlZCBlbXBsb3ltZW50IHdpdGggbGVhZGluZyB0ZWNoIGZpcm1zXHJcbuKAoiBNYW55IGFsdW1uaSB3b3JrIGF0IFF1ZXN0IEdsb2JhbCwgQm9zY2gsIFRveW90YSwgSW5mb3N5cywgVENTXHJcbuKAoiBTb21lIHB1cnN1aW5nIHBvc3QtZ3JhZHVhdGlvbiBjb3Vyc2VzXHJcbuKAoiBTZXZlcmFsIHRha2luZyBpbnRlcm5zaGlwIG9wcG9ydHVuaXRpZXNcclxu4oCiIFN0cm9uZyBlZHVjYXRpb24tdG8tZW1wbG95bWVudCBwYXRod2F5XHJcblxyXG7wn46TIEFsdW1uaSBTdXBwb3J0OlxyXG7igKIgRENFVCBzY2hvbGFyc2hpcHMgZm9yIGVuZ2luZWVyaW5nIGFzcGlyYW50c1xyXG7igKIgQ2FyZWVyIGd1aWRhbmNlIGFuZCBtZW50b3JzaGlwXHJcbuKAoiBOZXR3b3JraW5nIG9wcG9ydHVuaXRpZXNcclxu4oCiIEpvYiBwbGFjZW1lbnQgYXNzaXN0YW5jZVxyXG7igKIgQ29udGludWVkIGNvbm5lY3Rpb24gd2l0aCBHSlRTIGNvbW11bml0eVxyXG5cclxu8J+SvCBDYXJlZXIgUHJvZ3Jlc3Npb246XHJcbk1hbnkgc3R1ZGVudHMgc3VjY2Vzc2Z1bGx5IHRyYW5zaXRpb24gZnJvbTpcclxuR0pUUyAoOC0xMHRoKSDihpIgRGlwbG9tYS9JVEkg4oaSIEVuZ2luZWVyaW5nICh2aWEgRENFVCkg4oaSIEVtcGxveW1lbnRcclxuXHJcbvCfjJ8gU3VjY2VzcyBTdG9yaWVzOlxyXG7igKIgR3JhZHVhdGVzIHJldHVybmluZyBhcyBwcm9mZXNzaW9uYWxzIHRvIHRoZSBlY29zeXN0ZW0gdGhhdCBudXJ0dXJlZCB0aGVtXHJcbuKAoiBBbHVtbmkgd29ya2luZyB3aXRoIGxlYWRpbmcgdGVjaG5vbG9neSBmaXJtc1xyXG7igKIgU29tZSBwdXJzdWluZyBhZHZhbmNlZCBkZWdyZWVzIGFuZCByZXNlYXJjaFxyXG5cclxu8J+TnSBBbHVtbmkgUmVnaXN0cmF0aW9uOlxyXG5WaXNpdCBvdXIgQWx1bW5pIHBhZ2UgdG8gcmVnaXN0ZXIsIHN0YXkgY29ubmVjdGVkLCBhbmQgY29udHJpYnV0ZSB0byB0aGUgY29tbXVuaXR5IWBcclxuICB9XHJcblxyXG4gIC8vIENvbnRhY3RcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdjb250YWN0JykgfHwgbG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdwaG9uZScpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnZW1haWwnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3JlYWNoJykpIHtcclxuICAgIHJldHVybiBg8J+TniBDb250YWN0IEluZm9ybWF0aW9uXHJcblxyXG7wn4+b77iPIERlcGFydG1lbnQgb2YgVGVjaG5pY2FsIEVkdWNhdGlvbiwgS2FybmF0YWthXHJcbvCfk6cgRW1haWw6IGR0ZUBrYXIubmljLmluXHJcbvCfjJAgV2Vic2l0ZTogaHR0cHM6Ly9kdGUua2FyLm5pYy5pblxyXG5cclxu8J+TriBHSlRTIEdlbmVyYWwgQ29udGFjdDpcclxu8J+TpyBFbWFpbDogaW5mb0BnanRza2FybmF0YWthLmVkdS5pblxyXG7wn5OeIEhlbHBsaW5lOiAxODAwLVhYWC1YWFhYXHJcbuKPsCBIb3VyczogTW9uZGF5IHRvIEZyaWRheSwgOTowMCBBTSB0byA1OjAwIFBNXHJcblxyXG7wn4+rIEluZGl2aWR1YWwgU2Nob29sIENvbnRhY3RzOlxyXG5cclxuMS4gR0pUUyBCYWxsYXJpOiBnanRzLmJhbGxhcmlAZHRlLmthci5uaWMuaW4gfCArOTEtODM5Mi1YWFhYWFhcclxuMi4gR0pUUyBCaGFkcmF2YXRpOiBnanRzLmJoYWRyYXZhdGlAZHRlLmthci5uaWMuaW4gfCArOTEtODE4Mi1YWFhYWFhcclxuMy4gR0pUUyBIdWJiYWxsaTogZ2p0cy5odWJiYWxsaUBkdGUua2FyLm5pYy5pbiB8ICs5MS04MzYtWFhYWFhYXHJcbjQuIEdKVFMgQmFnYWxrb3Q6IGdqdHMuYmFnYWxrb3RAZHRlLmthci5uaWMuaW4gfCArOTEtODM1NC1YWFhYWFhcclxuNS4gR0pUUyBLYWxidXJnaTogZ2p0cy5rYWxidXJnaUBkdGUua2FyLm5pYy5pbiB8ICs5MS04NDcyLVhYWFhYWFxyXG42LiBHSlRTIE1hbmdhbG9yZTogZ2p0cy5tYW5nYWxvcmVAZHRlLmthci5uaWMuaW4gfCArOTEtODI0LVhYWFhYWFxyXG5cclxuRm9yIHNwZWNpZmljIGlucXVpcmllcywgcGxlYXNlIGNvbnRhY3QgdGhlIHJlbGV2YW50IHNjaG9vbCBkaXJlY3RseSFgXHJcbiAgfVxyXG5cclxuICAvLyBIb3N0ZWxcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdob3N0ZWwnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2FjY29tbW9kYXRpb24nKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ2JvYXJkaW5nJykpIHtcclxuICAgIHJldHVybiBg8J+PoCBIb3N0ZWwgRmFjaWxpdGllc1xyXG5cclxuSG9zdGVsIGZhY2lsaXRpZXMgYXJlIGF2YWlsYWJsZSBhdCBzZWxlY3QgR0pUUyBjYW1wdXNlczpcclxuXHJcbuKchSBTY2hvb2xzIHdpdGggSG9zdGVsOlxyXG4xLiBHSlRTIEJoYWRyYXZhdGkgKFNoaXZhbW9nZ2EgRGlzdHJpY3QpXHJcbjIuIEdKVFMgS2FsYnVyZ2kgKEthbGFidXJhZ2kgRGlzdHJpY3QpXHJcbjMuIEdKVFMgTWFuZ2Fsb3JlIChEYWtzaGluYSBLYW5uYWRhIERpc3RyaWN0KVxyXG5cclxu8J+PoiBIb3N0ZWwgRmVhdHVyZXM6XHJcbuKAoiBTZXBhcmF0ZSBob3N0ZWxzIGZvciBib3lzIGFuZCBnaXJsc1xyXG7igKIgU2FmZSBhbmQgc2VjdXJlIGVudmlyb25tZW50XHJcbuKAoiBOdXRyaXRpb3VzIG1lYWxzIHByb3ZpZGVkXHJcbuKAoiBTdHVkeSByb29tcyBhbmQgY29tbW9uIGFyZWFzXHJcbuKAoiAyNC83IHN1cGVydmlzaW9uXHJcbuKAoiBNZWRpY2FsIGZhY2lsaXRpZXMgbmVhcmJ5XHJcblxyXG7wn5KwIEhvc3RlbCBGZWVzOiBNaW5pbWFsIGNoYXJnZXMgd2l0aCBzY2hvbGFyc2hpcCBzdXBwb3J0IGF2YWlsYWJsZVxyXG5cclxu8J+TnSBGb3IgaG9zdGVsIGFkbWlzc2lvbiBhbmQgYXZhaWxhYmlsaXR5LCBwbGVhc2UgY29udGFjdCB0aGUgc3BlY2lmaWMgc2Nob29sIGRpcmVjdGx5LlxyXG5cclxuT3RoZXIgc2Nob29scyBwcm92aWRlIHRyYW5zcG9ydGF0aW9uIGZhY2lsaXRpZXMgZm9yIGRheSBzY2hvbGFycy5gXHJcbiAgfVxyXG5cclxuICAvLyBBZ2UvR3JhZGUgc3BlY2lmaWNcclxuICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC93aGF0IGFnZXxhZ2UgbGltaXR8d2hpY2ggZ3JhZGV8d2hpY2ggY2xhc3MvKSkge1xyXG4gICAgcmV0dXJuIGDwn5Gm8J+RpyBBZ2UgJiBHcmFkZSBSZXF1aXJlbWVudHNcclxuXHJcbvCfk5ogR0pUUyBvZmZlcnMgZWR1Y2F0aW9uIGZvcjpcclxu4oCiIEdyYWRlczogOHRoIHRvIDEwdGggc3RhbmRhcmRcclxu4oCiIEFnZTogMTMtMTUgeWVhcnNcclxu4oCiIEVudHJ5OiBBZnRlciBjb21wbGV0aW5nIDd0aCBzdGFuZGFyZFxyXG5cclxu8J+TiyBFbGlnaWJpbGl0eTpcclxu4oCiIFN0dWRlbnRzIHdobyBoYXZlIGNvbXBsZXRlZCA3dGggc3RhbmRhcmRcclxu4oCiIEFnZSBiZXR3ZWVuIDEzLTE1IHllYXJzIGF0IHRpbWUgb2YgYWRtaXNzaW9uXHJcbuKAoiBPcGVuIHRvIGFsbCBzdHVkZW50cywgcHJpb3JpdHkgZm9yIGVjb25vbWljYWxseSB3ZWFrZXIgc2VjdGlvbnNcclxuXHJcbvCfjpMgQWZ0ZXIgMTB0aCBTdGFuZGFyZDpcclxuU3R1ZGVudHMgY2FuIHB1cnN1ZTpcclxu4oCiIERpcGxvbWEgY291cnNlcyAobGF0ZXJhbCBlbnRyeSlcclxu4oCiIEVuZ2luZWVyaW5nIHRocm91Z2ggRENFVFxyXG7igKIgSVRJIGNvdXJzZXNcclxu4oCiIERpcmVjdCBlbXBsb3ltZW50XHJcbuKAoiBFbnRyZXByZW5ldXJzaGlwXHJcblxyXG5UaGUgMy15ZWFyIHByb2dyYW0gcHJvdmlkZXMgc3Ryb25nIHRlY2huaWNhbCBmb3VuZGF0aW9uIGZvciBmdXR1cmUgY2FyZWVycyFgXHJcbiAgfVxyXG5cclxuICAvLyBEb2N1bWVudHNcclxuICBpZiAobG93ZXJNZXNzYWdlLmluY2x1ZGVzKCdkb2N1bWVudCcpIHx8IGxvd2VyTWVzc2FnZS5pbmNsdWRlcygnY2VydGlmaWNhdGUnKSB8fCBsb3dlck1lc3NhZ2UuaW5jbHVkZXMoJ3doYXQgZG8gaSBuZWVkJykpIHtcclxuICAgIHJldHVybiBg8J+ThCBSZXF1aXJlZCBEb2N1bWVudHMgZm9yIEFkbWlzc2lvblxyXG5cclxuUGxlYXNlIHByZXBhcmUgdGhlIGZvbGxvd2luZyBkb2N1bWVudHM6XHJcblxyXG7inIUgQWNhZGVtaWMgRG9jdW1lbnRzOlxyXG7igKIgN3RoIHN0YW5kYXJkIG1hcmtzIGNhcmRcclxu4oCiIFRyYW5zZmVyIGNlcnRpZmljYXRlIGZyb20gcHJldmlvdXMgc2Nob29sXHJcbuKAoiBTY2hvb2wgbGVhdmluZyBjZXJ0aWZpY2F0ZVxyXG5cclxu4pyFIElkZW50aXR5IERvY3VtZW50czpcclxu4oCiIEFhZGhhciBjYXJkIChzdHVkZW50KVxyXG7igKIgUGFzc3BvcnQgc2l6ZSBwaG90b2dyYXBocyAocmVjZW50KVxyXG5cclxu4pyFIENhdGVnb3J5IENlcnRpZmljYXRlcyAoaWYgYXBwbGljYWJsZSk6XHJcbuKAoiBDYXN0ZSBjZXJ0aWZpY2F0ZSAoU0MvU1QvT0JDKVxyXG7igKIgSW5jb21lIGNlcnRpZmljYXRlIChmb3IgRVdTKVxyXG7igKIgTWlub3JpdHkgY2VydGlmaWNhdGUgKGlmIGFwcGxpY2FibGUpXHJcblxyXG7inIUgQWRkaXRpb25hbCBEb2N1bWVudHM6XHJcbuKAoiBQYXJlbnQvR3VhcmRpYW4gSUQgcHJvb2Zcclxu4oCiIEFkZHJlc3MgcHJvb2Zcclxu4oCiIEJhbmsgYWNjb3VudCBkZXRhaWxzIChmb3Igc2Nob2xhcnNoaXApXHJcblxyXG7wn5OdIE5vdGU6IEFsbCBkb2N1bWVudHMgc2hvdWxkIGJlIG9yaWdpbmFsIHdpdGggcGhvdG9jb3BpZXMuIENlcnRpZmljYXRlcyBzaG91bGQgYmUgYXR0ZXN0ZWQgYnkgYXBwcm9wcmlhdGUgYXV0aG9yaXRpZXMuXHJcblxyXG5Gb3Igc3BlY2lmaWMgZG9jdW1lbnQgcmVxdWlyZW1lbnRzLCBwbGVhc2UgY29udGFjdCB5b3VyIG5lYXJlc3QgR0pUUyBjYW1wdXMuYFxyXG4gIH1cclxuXHJcbiAgLy8gQ29tcGFyaXNvbiBvciBjaG9pY2VcclxuICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC93aGljaCBzY2hvb2x8YmVzdCBzY2hvb2x8d2hpY2ggY2FtcHVzfHJlY29tbWVuZHxjaG9vc2UvKSkge1xyXG4gICAgcmV0dXJuIGDwn46vIENob29zaW5nIHRoZSBSaWdodCBHSlRTIENhbXB1c1xyXG5cclxuQWxsIDYgR0pUUyBjYW1wdXNlcyBvZmZlciBxdWFsaXR5IGVkdWNhdGlvbiEgSGVyZSdzIGhvdyB0byBjaG9vc2U6XHJcblxyXG7wn5ONIEJ5IExvY2F0aW9uOlxyXG7igKIgTm9ydGggS2FybmF0YWthOiBIdWJiYWxsaSwgQmFnYWxrb3QsIEthbGJ1cmdpLCBCYWxsYXJpXHJcbuKAoiBDZW50cmFsIEthcm5hdGFrYTogQmhhZHJhdmF0aVxyXG7igKIgQ29hc3RhbCBLYXJuYXRha2E6IE1hbmdhbG9yZVxyXG5cclxu8J+PhiBCeSBBY2hpZXZlbWVudHM6XHJcbuKAoiBIaWdoZXN0IFBsYWNlbWVudDogR0pUUyBIdWJiYWxsaVxyXG7igKIgUm9ib3RpY3MgRXhjZWxsZW5jZTogR0pUUyBIdWJiYWxsaVxyXG7igKIgTmV3ZXN0IEluZnJhc3RydWN0dXJlOiBHSlRTIEJoYWRyYXZhdGksIEJhZ2Fsa290LCBLYWxidXJnaSwgTWFuZ2Fsb3JlIChFc3QuIDIwMjMpXHJcblxyXG7wn4+gIEhvc3RlbCBBdmFpbGFiaWxpdHk6XHJcbuKAoiBHSlRTIEJoYWRyYXZhdGksIEthbGJ1cmdpLCBNYW5nYWxvcmVcclxuXHJcbvCfk5ogQ291cnNlIEF2YWlsYWJpbGl0eTpcclxu4oCiIEFsbCA0IHN0cmVhbXM6IEh1YmJhbGxpLCBLYWxidXJnaSwgTWFuZ2Fsb3JlXHJcbuKAoiAzIHN0cmVhbXM6IEJhbGxhcmksIEJoYWRyYXZhdGlcclxu4oCiIDIgc3RyZWFtczogQmFnYWxrb3RcclxuXHJcbvCfkqEgUmVjb21tZW5kYXRpb246IENob29zZSBiYXNlZCBvbjpcclxuMS4gUHJveGltaXR5IHRvIHlvdXIgaG9tZVxyXG4yLiBEZXNpcmVkIHRlY2huaWNhbCBzdHJlYW1cclxuMy4gSG9zdGVsIHJlcXVpcmVtZW50XHJcbjQuIFNwZWNpZmljIHNjaG9vbCBhY2hpZXZlbWVudHNcclxuXHJcbkFsbCBzY2hvb2xzIGhhdmUgUXVlc3QgR2xvYmFsIHN1cHBvcnQgYW5kIGV4Y2VsbGVudCBmYWNpbGl0aWVzIWBcclxuICB9XHJcblxyXG4gIC8vIERlZmF1bHQgcmVzcG9uc2Ugd2l0aCBoZWxwZnVsIHN1Z2dlc3Rpb25zXHJcbiAgcmV0dXJuIGBJJ20gaGVyZSB0byBoZWxwISBJIGhhdmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgR0pUUyBLYXJuYXRha2EuIFlvdSBjYW4gYXNrIG1lIGFib3V0OlxyXG5cclxu8J+TmiBBZG1pc3Npb25zICYgRWxpZ2liaWxpdHlcclxu4oCiIFwiSG93IGRvIEkgYXBwbHk/XCJcclxu4oCiIFwiV2hhdCBkb2N1bWVudHMgZG8gSSBuZWVkP1wiXHJcbuKAoiBcIldoYXQgaXMgdGhlIGFnZSBsaW1pdD9cIlxyXG5cclxu8J+OkyBDb3Vyc2VzICYgRWR1Y2F0aW9uXHJcbuKAoiBcIldoYXQgY291cnNlcyBhcmUgb2ZmZXJlZD9cIlxyXG7igKIgXCJUZWxsIG1lIGFib3V0IEVsZWN0cm9uaWNzIGNvdXJzZVwiXHJcbuKAoiBcIldoYXQgaXMgdGhlIGN1cnJpY3VsdW0/XCJcclxuXHJcbvCfj6sgU2Nob29scyAmIExvY2F0aW9uc1xyXG7igKIgXCJMaXN0IGFsbCBzY2hvb2xzXCJcclxu4oCiIFwiVGVsbCBtZSBhYm91dCBHSlRTIEh1YmJhbGxpXCJcclxu4oCiIFwiV2hpY2ggc2Nob29sIGhhcyBob3N0ZWw/XCJcclxuXHJcbvCfkrwgQ2FyZWVyICYgUGxhY2VtZW50c1xyXG7igKIgXCJXaGF0IGFyZSB0aGUgcGxhY2VtZW50IHJhdGVzP1wiXHJcbuKAoiBcIkNhcmVlciBvcHRpb25zIGFmdGVyIDEwdGg/XCJcclxu4oCiIFwiVGVsbCBtZSBhYm91dCBRdWVzdCBHbG9iYWwgcGFydG5lcnNoaXBcIlxyXG5cclxu8J+SsCBTY2hvbGFyc2hpcHMgJiBGZWVzXHJcbuKAoiBcIldoYXQgc2Nob2xhcnNoaXBzIGFyZSBhdmFpbGFibGU/XCJcclxu4oCiIFwiSG93IG11Y2ggYXJlIHRoZSBmZWVzP1wiXHJcblxyXG7wn5GlIEFsdW1uaSAmIFN1Y2Nlc3MgU3Rvcmllc1xyXG7igKIgXCJBbHVtbmkgYWNoaWV2ZW1lbnRzXCJcclxu4oCiIFwiQ2FyZWVyIG91dGNvbWVzXCJcclxuXHJcbvCfjq8gKipHcmFudHMgJiBGdW5kaW5nIChORVchKSoqXHJcbuKAoiBcIldoYXQgZ3JhbnRzIGFyZSBhdmFpbGFibGU/XCJcclxu4oCiIFwiSGVscCBtZSBjaG9vc2UgYSBncmFudFwiXHJcbuKAoiBcIkhvdyBkbyBJIGFwcGx5IGZvciBncmFudHM/XCJcclxuXHJcbkp1c3QgYXNrIHlvdXIgcXVlc3Rpb24sIGFuZCBJJ2xsIHByb3ZpZGUgZGV0YWlsZWQgaW5mb3JtYXRpb24hYFxyXG59XHJcblxyXG4vLyBQcm9jZXNzIGdyYW50IHF1ZXN0aW9ubmFpcmUgcmVzcG9uc2VzXHJcbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NHcmFudFF1ZXN0aW9ubmFpcmUobWVzc2FnZSwgc3RlcCwgY29udGV4dCkge1xyXG4gIGNvbnN0IGxvd2VyTWVzc2FnZSA9IG1lc3NhZ2UudG9Mb3dlckNhc2UoKVxyXG4gIFxyXG4gIC8vIEluaXRpYWxpemUgY29udGV4dCBpZiBub3QgZXhpc3RzXHJcbiAgaWYgKCFjb250ZXh0LmdyYW50QW5zd2Vycykge1xyXG4gICAgY29udGV4dC5ncmFudEFuc3dlcnMgPSB7fVxyXG4gIH1cclxuXHJcbiAgLy8gU3RlcCAxOiBQcmltYXJ5IE5lZWRcclxuICBpZiAoc3RlcCA9PT0gMSkge1xyXG4gICAgbGV0IGNhdGVnb3J5ID0gJydcclxuICAgIGxldCBuZWVkID0gJydcclxuICAgIFxyXG4gICAgLy8gQmV0dGVyIHBhdHRlcm4gbWF0Y2hpbmcgd2l0aCBtb3JlIGZsZXhpYmlsaXR5XHJcbiAgICBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9eYSR8aW5mcmFzdHJ1Y3R1cmV8YnVpbGRpbmd8Y2xhc3Nyb29tfGZ1cm5pdHVyZXxjb25zdHJ1Y3Rpb258cmVwYWlyLykpIHtcclxuICAgICAgY2F0ZWdvcnkgPSAnSW5mcmFzdHJ1Y3R1cmUgJiBRdWFsaXR5J1xyXG4gICAgICBuZWVkID0gJ2luZnJhc3RydWN0dXJlJ1xyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15iJHxkaWdpdGFsfHRlY2hub2xvZ3l8Y29tcHV0ZXJ8aW50ZXJuZXR8c21hcnR8dGVjaHxpdHxzb2Z0d2FyZXxoYXJkd2FyZS8pKSB7XHJcbiAgICAgIGNhdGVnb3J5ID0gJ0RpZ2l0YWwgSW5mcmFzdHJ1Y3R1cmUnXHJcbiAgICAgIG5lZWQgPSAnZGlnaXRhbCdcclxuICAgIH0gZWxzZSBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9eYyR8bGFifHNjaWVuY2V8ZXF1aXBtZW50fGV4cGVyaW1lbnR8YXBwYXJhdHVzLykpIHtcclxuICAgICAgY2F0ZWdvcnkgPSAnTGFib3JhdG9yeSAmIEVxdWlwbWVudCdcclxuICAgICAgbmVlZCA9ICdsYWJvcmF0b3J5J1xyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15kJHxsaWJyYXJ5fGJvb2t8cmVhZGluZ3xyZXNvdXJjZS8pKSB7XHJcbiAgICAgIGNhdGVnb3J5ID0gJ0xpYnJhcnkgJiBSZXNvdXJjZXMnXHJcbiAgICAgIG5lZWQgPSAnbGlicmFyeSdcclxuICAgIH0gZWxzZSBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9eZSR8c3BvcnRzfHBsYXlncm91bmR8cGh5c2ljYWx8YXRobGV0aWN8Z2FtZS8pKSB7XHJcbiAgICAgIGNhdGVnb3J5ID0gJ1Nwb3J0cyAmIFBoeXNpY2FsIEVkdWNhdGlvbidcclxuICAgICAgbmVlZCA9ICdzcG9ydHMnXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmYkfHRlYWNoZXJ8dHJhaW5pbmd8cHJvZmVzc2lvbmFsfGRldmVsb3BtZW50fGZhY3VsdHkvKSkge1xyXG4gICAgICBjYXRlZ29yeSA9ICdUZWFjaGVyIERldmVsb3BtZW50J1xyXG4gICAgICBuZWVkID0gJ3RlYWNoZXInXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmckfGluY2x1c2l2ZXxzcGVjaWFsIG5lZWRzfGRpc2FiaWxpdHl8YWNjZXNzaWJsZXxjd3NuLykpIHtcclxuICAgICAgY2F0ZWdvcnkgPSAnSW5jbHVzaXZlIEVkdWNhdGlvbidcclxuICAgICAgbmVlZCA9ICdpbmNsdXNpdmUnXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmgkfHZvY2F0aW9uYWx8c2tpbGx8Y2FyZWVyfGpvYnxlbXBsb3ltZW50LykpIHtcclxuICAgICAgY2F0ZWdvcnkgPSAnVm9jYXRpb25hbCBUcmFpbmluZydcclxuICAgICAgbmVlZCA9ICd2b2NhdGlvbmFsJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgSSB1bmRlcnN0YW5kIHlvdSdyZSBsb29raW5nIGZvciBncmFudHMsIGJ1dCBJIG5lZWQgdG8ga25vdyB5b3VyIHByaW1hcnkgbmVlZCBtb3JlIGNsZWFybHkuXHJcblxyXG5QbGVhc2UgY2hvb3NlIG9uZSBvcHRpb246XHJcbkEpIEluZnJhc3RydWN0dXJlIEIpIERpZ2l0YWwvVGVjaG5vbG9neSBDKSBMYWJvcmF0b3J5IEQpIExpYnJhcnkgRSkgU3BvcnRzIEYpIFRlYWNoZXIgVHJhaW5pbmcgRykgSW5jbHVzaXZlIEVkdWNhdGlvbiBIKSBWb2NhdGlvbmFsXHJcblxyXG5PciBkZXNjcmliZSBpdCBpbiBzaW1wbGUgdGVybXMgbGlrZSBcIndlIG5lZWQgY29tcHV0ZXJzXCIgb3IgXCJ3ZSBuZWVkIHNwb3J0cyBmYWNpbGl0aWVzXCJgLFxyXG4gICAgICAgIHR5cGU6ICdncmFudF9xdWVzdGlvbicsXHJcbiAgICAgICAgc3RlcDogMSxcclxuICAgICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICAgICAgc3RlcDogMVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmNhdGVnb3J5ID0gY2F0ZWdvcnlcclxuICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLm5lZWQgPSBuZWVkXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogYFBlcmZlY3QhIFlvdSBuZWVkIHN1cHBvcnQgZm9yICoqJHtjYXRlZ29yeX0qKi5cclxuXHJcbioqUXVlc3Rpb24gMiBvZiA1OioqIFdoYXQgaXMgeW91ciBzY2hvb2wncyBjdXJyZW50IHN0dWRlbnQgZW5yb2xsbWVudD9cclxuXHJcbkEpIExlc3MgdGhhbiAxMDAgc3R1ZGVudHNcclxuQikgMTAwLTI1MCBzdHVkZW50c1xyXG5DKSAyNTAtNTAwIHN0dWRlbnRzXHJcbkQpIDUwMC0xMDAwIHN0dWRlbnRzXHJcbkUpIE1vcmUgdGhhbiAxMDAwIHN0dWRlbnRzXHJcblxyXG5QbGVhc2UgcmVwbHkgd2l0aCB0aGUgbGV0dGVyIChBLUUpIG9yIHRlbGwgbWUgdGhlIGFwcHJveGltYXRlIG51bWJlci5gLFxyXG4gICAgICB0eXBlOiAnZ3JhbnRfcXVlc3Rpb24nLFxyXG4gICAgICBzdGVwOiAyLFxyXG4gICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgLi4uY29udGV4dCxcclxuICAgICAgICBzdGVwOiAyXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFN0ZXAgMjogU3R1ZGVudCBFbnJvbGxtZW50XHJcbiAgaWYgKHN0ZXAgPT09IDIpIHtcclxuICAgIGxldCBlbnJvbGxtZW50ID0gMFxyXG4gICAgXHJcbiAgICAvLyBFeHRyYWN0IG51bWJlciBmcm9tIG1lc3NhZ2Ugb3IgdXNlIGxldHRlciBjaG9pY2VcclxuICAgIGNvbnN0IG51bWJlck1hdGNoID0gbWVzc2FnZS5tYXRjaCgvXFxkKy8pXHJcbiAgICBpZiAobnVtYmVyTWF0Y2gpIHtcclxuICAgICAgZW5yb2xsbWVudCA9IHBhcnNlSW50KG51bWJlck1hdGNoWzBdKVxyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15hJHxsZXNzLioxMDB8dW5kZXIgMTAwfGJlbG93IDEwMHxzbWFsbC8pKSB7XHJcbiAgICAgIGVucm9sbG1lbnQgPSA3NVxyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15iJHwxMDAuKjI1MHxodW5kcmVkfDE1MHwyMDAvKSkge1xyXG4gICAgICBlbnJvbGxtZW50ID0gMTc1XHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmMkfDI1MC4qNTAwfDMwMHw0MDB8bWVkaXVtLykpIHtcclxuICAgICAgZW5yb2xsbWVudCA9IDM3NVxyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15kJHw1MDAuKjEwMDB8NjAwfDcwMHw4MDB8OTAwfGxhcmdlLykpIHtcclxuICAgICAgZW5yb2xsbWVudCA9IDc1MFxyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15lJHxtb3JlLioxMDAwfG92ZXIgMTAwMHwxMDAwXFwrfHZlcnkgbGFyZ2UvKSkge1xyXG4gICAgICBlbnJvbGxtZW50ID0gMTIwMFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIHRlbGwgbWUgeW91ciBzdHVkZW50IGVucm9sbG1lbnQuIFlvdSBjYW4gc2F5OlxyXG4tIEEgbGV0dGVyIChBLUUpXHJcbi0gQSBudW1iZXIgbGlrZSBcIjE4MCBzdHVkZW50c1wiIG9yIFwiMzUwXCJcclxuLSBPciBkZXNjcmliZSBpdCBsaWtlIFwiYXJvdW5kIDIwMFwiIG9yIFwiYWJvdXQgNDAwXCJgLFxyXG4gICAgICAgIHR5cGU6ICdncmFudF9xdWVzdGlvbicsXHJcbiAgICAgICAgc3RlcDogMixcclxuICAgICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICAgICAgc3RlcDogMlxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmVucm9sbG1lbnQgPSBlbnJvbGxtZW50XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWVzc2FnZTogYEdyZWF0ISBZb3VyIHNjaG9vbCBoYXMgYXBwcm94aW1hdGVseSAqKiR7ZW5yb2xsbWVudH0gc3R1ZGVudHMqKi5cclxuXHJcbioqUXVlc3Rpb24gMyBvZiA1OioqIFdoYXQgaXMgeW91ciBlc3RpbWF0ZWQgYnVkZ2V0IHJlcXVpcmVtZW50P1xyXG5cclxuQSkg8J+SsCBScyAxMCwwMDAgLSBScyAxIGxha2ggKFNtYWxsIG1haW50ZW5hbmNlL3N1cHBsaWVzKVxyXG5CKSDwn5KwIFJzIDEtNSBsYWtoIChNaW5vciB1cGdyYWRlcylcclxuQykg8J+SsCBScyA1LTE1IGxha2ggKFNpZ25pZmljYW50IGltcHJvdmVtZW50cylcclxuRCkg8J+SsCBScyAxNS01MCBsYWtoIChNYWpvciBpbmZyYXN0cnVjdHVyZSlcclxuRSkg8J+SsCBScyA1MCBsYWtoKyAoQ29tcHJlaGVuc2l2ZSBkZXZlbG9wbWVudClcclxuXHJcblBsZWFzZSByZXBseSB3aXRoIHRoZSBsZXR0ZXIgKEEtRSkuYCxcclxuICAgICAgdHlwZTogJ2dyYW50X3F1ZXN0aW9uJyxcclxuICAgICAgc3RlcDogMyxcclxuICAgICAgY29udGV4dDoge1xyXG4gICAgICAgIC4uLmNvbnRleHQsXHJcbiAgICAgICAgc3RlcDogM1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTdGVwIDM6IEJ1ZGdldCBSZXF1aXJlbWVudFxyXG4gIGlmIChzdGVwID09PSAzKSB7XHJcbiAgICBsZXQgYnVkZ2V0UmFuZ2UgPSAnJ1xyXG4gICAgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmEkLykpIHtcclxuICAgICAgYnVkZ2V0UmFuZ2UgPSAnc21hbGwnXHJcbiAgICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmJ1ZGdldCA9IDUwMDAwXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmIkLykpIHtcclxuICAgICAgYnVkZ2V0UmFuZ2UgPSAnbWlub3InXHJcbiAgICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmJ1ZGdldCA9IDMwMDAwMFxyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15jJC8pKSB7XHJcbiAgICAgIGJ1ZGdldFJhbmdlID0gJ3NpZ25pZmljYW50J1xyXG4gICAgICBjb250ZXh0LmdyYW50QW5zd2Vycy5idWRnZXQgPSAxMDAwMDAwXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmQkLykpIHtcclxuICAgICAgYnVkZ2V0UmFuZ2UgPSAnbWFqb3InXHJcbiAgICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmJ1ZGdldCA9IDMwMDAwMDBcclxuICAgIH0gZWxzZSBpZiAobG93ZXJNZXNzYWdlLm1hdGNoKC9eZSQvKSkge1xyXG4gICAgICBidWRnZXRSYW5nZSA9ICdjb21wcmVoZW5zaXZlJ1xyXG4gICAgICBjb250ZXh0LmdyYW50QW5zd2Vycy5idWRnZXQgPSAxMDAwMDAwMFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGNob29zZSBvbmUgb2YgdGhlIGJ1ZGdldCByYW5nZXMgKEEtRSkuYCxcclxuICAgICAgICB0eXBlOiAnZ3JhbnRfcXVlc3Rpb24nLFxyXG4gICAgICAgIHN0ZXA6IDMsXHJcbiAgICAgICAgY29udGV4dDoge1xyXG4gICAgICAgICAgLi4uY29udGV4dCxcclxuICAgICAgICAgIHN0ZXA6IDNcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBgUGVyZmVjdCEgQnVkZ2V0IHJlcXVpcmVtZW50IG5vdGVkLlxyXG5cclxuKipRdWVzdGlvbiA0IG9mIDU6KiogRG9lcyB5b3VyIHNjaG9vbCBoYXZlIHRoZSBmb2xsb3dpbmc/XHJcblxyXG5BKSDinIUgQWxsIGJhc2ljIGluZnJhc3RydWN0dXJlIChidWlsZGluZywgZWxlY3RyaWNpdHksIHdhdGVyKVxyXG5CKSDimqDvuI8gU29tZSBpbmZyYXN0cnVjdHVyZSBnYXBzXHJcbkMpIOKdjCBTaWduaWZpY2FudCBpbmZyYXN0cnVjdHVyZSBuZWVkc1xyXG5cclxuUGxlYXNlIHJlcGx5IHdpdGggdGhlIGxldHRlciAoQS1DKS5gLFxyXG4gICAgICB0eXBlOiAnZ3JhbnRfcXVlc3Rpb24nLFxyXG4gICAgICBzdGVwOiA0LFxyXG4gICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgLi4uY29udGV4dCxcclxuICAgICAgICBzdGVwOiA0XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIFN0ZXAgNDogSW5mcmFzdHJ1Y3R1cmUgU3RhdHVzXHJcbiAgaWYgKHN0ZXAgPT09IDQpIHtcclxuICAgIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15hJHxhbGx8eWVzfGNvbXBsZXRlLykpIHtcclxuICAgICAgY29udGV4dC5ncmFudEFuc3dlcnMuaW5mcmFzdHJ1Y3R1cmUgPSAnY29tcGxldGUnXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmIkfHNvbWV8cGFydGlhbC8pKSB7XHJcbiAgICAgIGNvbnRleHQuZ3JhbnRBbnN3ZXJzLmluZnJhc3RydWN0dXJlID0gJ3BhcnRpYWwnXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmMkfHNpZ25pZmljYW50fG5vfGxhY2tpbmcvKSkge1xyXG4gICAgICBjb250ZXh0LmdyYW50QW5zd2Vycy5pbmZyYXN0cnVjdHVyZSA9ICdsYWNraW5nJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGNob29zZSBvbmUgb3B0aW9uIChBLUMpIHJlZ2FyZGluZyB5b3VyIGluZnJhc3RydWN0dXJlIHN0YXR1cy5gLFxyXG4gICAgICAgIHR5cGU6ICdncmFudF9xdWVzdGlvbicsXHJcbiAgICAgICAgc3RlcDogNCxcclxuICAgICAgICBjb250ZXh0OiB7XHJcbiAgICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICAgICAgc3RlcDogNFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IGBUaGFuayB5b3UhIExhc3QgcXVlc3Rpb24uLi5cclxuXHJcbioqUXVlc3Rpb24gNSBvZiA1OioqIFdoZW4gZG8geW91IG5lZWQgdGhlIGZ1bmRpbmc/XHJcblxyXG5BKSDwn5qoIFVyZ2VudCAod2l0aGluIDEtMiBtb250aHMpXHJcbkIpIOKPsCBTb29uICh3aXRoaW4gMy02IG1vbnRocylcclxuQykg8J+ThSBQbGFubmluZyBhaGVhZCAoNi0xMiBtb250aHMpXHJcblxyXG5QbGVhc2UgcmVwbHkgd2l0aCB0aGUgbGV0dGVyIChBLUMpLmAsXHJcbiAgICAgIHR5cGU6ICdncmFudF9xdWVzdGlvbicsXHJcbiAgICAgIHN0ZXA6IDUsXHJcbiAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICAuLi5jb250ZXh0LFxyXG4gICAgICAgIHN0ZXA6IDVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gU3RlcCA1OiBUaW1lbGluZSAtIEdlbmVyYXRlIFJlY29tbWVuZGF0aW9uc1xyXG4gIGlmIChzdGVwID09PSA1KSB7XHJcbiAgICBsZXQgdGltZWxpbmUgPSAnJ1xyXG4gICAgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmEkfHVyZ2VudHxpbW1lZGlhdGUvKSkge1xyXG4gICAgICB0aW1lbGluZSA9ICd1cmdlbnQnXHJcbiAgICB9IGVsc2UgaWYgKGxvd2VyTWVzc2FnZS5tYXRjaCgvXmIkfHNvb24vKSkge1xyXG4gICAgICB0aW1lbGluZSA9ICdzb29uJ1xyXG4gICAgfSBlbHNlIGlmIChsb3dlck1lc3NhZ2UubWF0Y2goL15jJHxwbGFubmluZ3xsYXRlci8pKSB7XHJcbiAgICAgIHRpbWVsaW5lID0gJ3BsYW5uaW5nJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBtZXNzYWdlOiBgUGxlYXNlIGNob29zZSBvbmUgdGltZWxpbmUgb3B0aW9uIChBLUMpLmAsXHJcbiAgICAgICAgdHlwZTogJ2dyYW50X3F1ZXN0aW9uJyxcclxuICAgICAgICBzdGVwOiA1LFxyXG4gICAgICAgIGNvbnRleHQ6IHtcclxuICAgICAgICAgIC4uLmNvbnRleHQsXHJcbiAgICAgICAgICBzdGVwOiA1XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29udGV4dC5ncmFudEFuc3dlcnMudGltZWxpbmUgPSB0aW1lbGluZVxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiBhbnN3ZXJzXHJcbiAgICByZXR1cm4gYXdhaXQgZ2VuZXJhdGVHcmFudFJlY29tbWVuZGF0aW9ucyhjb250ZXh0LmdyYW50QW5zd2VycylcclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBtZXNzYWdlOiBgU29tZXRoaW5nIHdlbnQgd3JvbmcuIExldCdzIHN0YXJ0IG92ZXIuIFNheSBcImhlbHAgbWUgY2hvb3NlIGEgZ3JhbnRcIiB0byBiZWdpbi5gLFxyXG4gICAgdHlwZTogJ2Vycm9yJ1xyXG4gIH1cclxufVxyXG5cclxuLy8gR2VuZXJhdGUgZ3JhbnQgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHF1ZXN0aW9ubmFpcmVcclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVHcmFudFJlY29tbWVuZGF0aW9ucyhhbnN3ZXJzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3REQigpXHJcbiAgICBcclxuICAgIC8vIEZldGNoIGdyYW50cyBmcm9tIGJvdGggc291cmNlc1xyXG4gICAgY29uc3QgW2xvY2FsR3JhbnRzLCBteVNjaGVtZURhdGFdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICBHcmFudC5maW5kKHsgc3RhdHVzOiAnYWN0aXZlJyB9KS5sZWFuKCksXHJcbiAgICAgIGZldGNoTXlTY2hlbWVEYXRhKClcclxuICAgIF0pXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke2xvY2FsR3JhbnRzLmxlbmd0aH0gbG9jYWwgZ3JhbnRzIGFuZCAke215U2NoZW1lRGF0YT8uc2NoZW1lcz8ubGVuZ3RoIHx8IDB9IE15U2NoZW1lIGdyYW50c2ApXHJcbiAgICBcclxuICAgIC8vIFByb2Nlc3MgbG9jYWwgZ3JhbnRzXHJcbiAgICBjb25zdCBtYXRjaGVkTG9jYWxHcmFudHMgPSBbXVxyXG4gICAgZm9yIChjb25zdCBncmFudCBvZiBsb2NhbEdyYW50cykge1xyXG4gICAgICBsZXQgc2NvcmUgPSAwXHJcbiAgICAgIGxldCByZWFzb25zID0gW11cclxuICAgICAgXHJcbiAgICAgIC8vIE1hdGNoIGJ5IGNhdGVnb3J5XHJcbiAgICAgIGlmIChncmFudC5jYXRlZ29yeSAmJiBhbnN3ZXJzLmNhdGVnb3J5KSB7XHJcbiAgICAgICAgaWYgKGdyYW50LmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYW5zd2Vycy5uZWVkKSB8fCBcclxuICAgICAgICAgICAgYW5zd2Vycy5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGdyYW50LmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgICBzY29yZSArPSA0MFxyXG4gICAgICAgICAgcmVhc29ucy5wdXNoKGBQZXJmZWN0IG1hdGNoIGZvciAke2Fuc3dlcnMuY2F0ZWdvcnl9YClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIE1hdGNoIGJ5IGJ1ZGdldFxyXG4gICAgICBpZiAoZ3JhbnQuYW1vdW50KSB7XHJcbiAgICAgICAgY29uc3QgZ3JhbnRNaW4gPSBncmFudC5hbW91bnQubWluIHx8IDBcclxuICAgICAgICBjb25zdCBncmFudE1heCA9IGdyYW50LmFtb3VudC5tYXggfHwgOTk5OTk5OTk5XHJcbiAgICAgICAgaWYgKGFuc3dlcnMuYnVkZ2V0ID49IGdyYW50TWluICYmIGFuc3dlcnMuYnVkZ2V0IDw9IGdyYW50TWF4KSB7XHJcbiAgICAgICAgICBzY29yZSArPSAzMFxyXG4gICAgICAgICAgcmVhc29ucy5wdXNoKGBCdWRnZXQgYWxpZ25zIHdpdGggeW91ciByZXF1aXJlbWVudGApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBNYXRjaCBieSBlbnJvbGxtZW50IChzb21lIGdyYW50cyBoYXZlIG1pbmltdW0gc3R1ZGVudCByZXF1aXJlbWVudHMpXHJcbiAgICAgIGlmIChhbnN3ZXJzLmVucm9sbG1lbnQgPj0gMTAwKSB7XHJcbiAgICAgICAgc2NvcmUgKz0gMTVcclxuICAgICAgICByZWFzb25zLnB1c2goYFlvdXIgZW5yb2xsbWVudCBtZWV0cyB0eXBpY2FsIHJlcXVpcmVtZW50c2ApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFRpbWVsaW5lIGNvbnNpZGVyYXRpb25cclxuICAgICAgaWYgKGFuc3dlcnMudGltZWxpbmUgPT09ICd1cmdlbnQnICYmIGdyYW50LmFwcGxpY2F0aW9uRGVhZGxpbmUpIHtcclxuICAgICAgICBjb25zdCBkZWFkbGluZSA9IG5ldyBEYXRlKGdyYW50LmFwcGxpY2F0aW9uRGVhZGxpbmUpXHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgICAgIGNvbnN0IGRheXNVbnRpbERlYWRsaW5lID0gTWF0aC5mbG9vcigoZGVhZGxpbmUgLSBub3cpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxyXG4gICAgICAgIGlmIChkYXlzVW50aWxEZWFkbGluZSA+IDMwKSB7XHJcbiAgICAgICAgICBzY29yZSArPSAxNVxyXG4gICAgICAgICAgcmVhc29ucy5wdXNoKGBTdWZmaWNpZW50IHRpbWUgdG8gYXBwbHkgKCR7ZGF5c1VudGlsRGVhZGxpbmV9IGRheXMpYClcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2NvcmUgKz0gMTVcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHNjb3JlID4gMCkge1xyXG4gICAgICAgIG1hdGNoZWRMb2NhbEdyYW50cy5wdXNoKHtcclxuICAgICAgICAgIC4uLmdyYW50LFxyXG4gICAgICAgICAgbWF0Y2hTY29yZTogc2NvcmUsXHJcbiAgICAgICAgICBtYXRjaFJlYXNvbnM6IHJlYXNvbnMsXHJcbiAgICAgICAgICBzb3VyY2U6ICdsb2NhbCdcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFByb2Nlc3MgTXlTY2hlbWUgZ3JhbnRzXHJcbiAgICBjb25zdCBtYXRjaGVkTXlTY2hlbWVHcmFudHMgPSBbXVxyXG4gICAgaWYgKG15U2NoZW1lRGF0YT8uc2NoZW1lcykge1xyXG4gICAgICBmb3IgKGNvbnN0IHNjaGVtZSBvZiBteVNjaGVtZURhdGEuc2NoZW1lcykge1xyXG4gICAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSBjYWxjdWxhdGVTY2hlbWVTaW1pbGFyaXR5KHNjaGVtZSwgYW5zd2VycylcclxuICAgICAgICBcclxuICAgICAgICBpZiAoc2ltaWxhcml0eS5zY29yZSA+IDIwKSB7IC8vIE9ubHkgaW5jbHVkZSBpZiByZWFzb25hYmxlIG1hdGNoXHJcbiAgICAgICAgICBtYXRjaGVkTXlTY2hlbWVHcmFudHMucHVzaCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiBzY2hlbWUubmFtZSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHNjaGVtZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgZ3JhbnRQcm92aWRlcjogc2NoZW1lLm1pbmlzdHJ5IHx8ICdHb3Zlcm5tZW50IG9mIEluZGlhJyxcclxuICAgICAgICAgICAgYW1vdW50OiBzY2hlbWUuYW1vdW50IHx8ICdBbW91bnQgdmFyaWVzJyxcclxuICAgICAgICAgICAgYXBwbGljYXRpb25Vcmw6IHNjaGVtZS53ZWJzaXRlLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogc2NoZW1lLmNhdGVnb3J5Py50b0xvd2VyQ2FzZSgpIHx8ICdlZHVjYXRpb24nLFxyXG4gICAgICAgICAgICBtYXRjaFNjb3JlOiBzaW1pbGFyaXR5LnNjb3JlLFxyXG4gICAgICAgICAgICBtYXRjaFJlYXNvbnM6IHNpbWlsYXJpdHkucmVhc29ucyxcclxuICAgICAgICAgICAgc291cmNlOiAnbXlzY2hlbWUnLFxyXG4gICAgICAgICAgICBlbGlnaWJpbGl0eTogc2NoZW1lLmVsaWdpYmlsaXR5LFxyXG4gICAgICAgICAgICBhcHBsaWNhdGlvblByb2Nlc3M6IHNjaGVtZS5hcHBsaWNhdGlvblByb2Nlc3NcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENvbWJpbmUgYW5kIHNvcnQgYWxsIGdyYW50c1xyXG4gICAgY29uc3QgYWxsTWF0Y2hlZEdyYW50cyA9IFsuLi5tYXRjaGVkTG9jYWxHcmFudHMsIC4uLm1hdGNoZWRNeVNjaGVtZUdyYW50c11cclxuICAgIGFsbE1hdGNoZWRHcmFudHMuc29ydCgoYSwgYikgPT4gYi5tYXRjaFNjb3JlIC0gYS5tYXRjaFNjb3JlKVxyXG4gICAgXHJcbiAgICAvLyBUYWtlIHRvcCA1IGdyYW50c1xyXG4gICAgY29uc3QgdG9wR3JhbnRzID0gYWxsTWF0Y2hlZEdyYW50cy5zbGljZSgwLCA1KVxyXG4gICAgXHJcbiAgICBpZiAodG9wR3JhbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIG1lc3NhZ2U6IGBCYXNlZCBvbiB5b3VyIHJlcXVpcmVtZW50cywgSSBjb3VsZG4ndCBmaW5kIGV4YWN0IG1hdGNoZXMuIEhvd2V2ZXIsIEkgcmVjb21tZW5kOlxyXG5cclxuMS4gKipTYW1hZ3JhIFNoaWtzaGEgQWJoaXlhbioqIC0gQ29tcHJlaGVuc2l2ZSBzY2hlbWUgY292ZXJpbmcgYWxsIGFzcGVjdHMgb2Ygc2Nob29sIGVkdWNhdGlvblxyXG4yLiAqKlBNIFNIUkkgU2Nob29scyoqIC0gRm9yIG92ZXJhbGwgc2Nob29sIHRyYW5zZm9ybWF0aW9uXHJcbjMuICoqS2FybmF0YWthIEluZnJhc3RydWN0dXJlIEdyYW50KiogLSBTdGF0ZS1sZXZlbCBzdXBwb3J0XHJcblxyXG5QbGVhc2UgdmlzaXQgdGhlIEdyYW50cyBEaXNjb3ZlcnkgcGFnZSBpbiB5b3VyIGRhc2hib2FyZCB0byBleHBsb3JlIGFsbCBhdmFpbGFibGUgZ3JhbnRzLCBvciBjb250YWN0IHRoZSBEZXBhcnRtZW50IG9mIFRlY2huaWNhbCBFZHVjYXRpb24gZm9yIHBlcnNvbmFsaXplZCBndWlkYW5jZS5gLFxyXG4gICAgICAgIHR5cGU6ICdncmFudF9yZWNvbW1lbmRhdGlvbnMnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgbGV0IHJlc3BvbnNlID0gYPCfjq8gKipQZXJmZWN0ISBCYXNlZCBvbiB5b3VyIGFuc3dlcnMsIGhlcmUgYXJlIHRoZSBUT1AgJHt0b3BHcmFudHMubGVuZ3RofSBHUkFOVFMgcmVjb21tZW5kZWQgZm9yIHlvdXIgc2Nob29sOioqXFxuXFxuYFxyXG4gICAgcmVzcG9uc2UgKz0gYPCfk4ogKipTb3VyY2VzOioqIExvY2FsIERhdGFiYXNlICgke21hdGNoZWRMb2NhbEdyYW50cy5sZW5ndGh9KSArIE15U2NoZW1lLmdvdi5pbiAoJHttYXRjaGVkTXlTY2hlbWVHcmFudHMubGVuZ3RofSlcXG5cXG5gXHJcbiAgICBcclxuICAgIHRvcEdyYW50cy5mb3JFYWNoKChncmFudCwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3Qgc291cmNlSWNvbiA9IGdyYW50LnNvdXJjZSA9PT0gJ2xvY2FsJyA/ICfwn4+b77iPJyA6ICfwn4yQJ1xyXG4gICAgICBcclxuICAgICAgLy8gRGlzcGxheSBhbW91bnQgcHJvcGVybHlcclxuICAgICAgbGV0IGFtb3VudERpc3BsYXkgPSAnJ1xyXG4gICAgICBpZiAoZ3JhbnQucGVyU2Nob29sQW1vdW50KSB7XHJcbiAgICAgICAgYW1vdW50RGlzcGxheSA9IGBQZXIgU2Nob29sOiAke2dyYW50LnBlclNjaG9vbEFtb3VudH1gXHJcbiAgICAgICAgaWYgKGdyYW50LnRvdGFsQW1vdW50KSB7XHJcbiAgICAgICAgICBhbW91bnREaXNwbGF5ICs9IGBcXG7wn5KwIFRvdGFsIFNjaGVtZTogJHtncmFudC50b3RhbEFtb3VudH1gXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGdyYW50LmFtb3VudCAmJiB0eXBlb2YgZ3JhbnQuYW1vdW50ID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IChncmFudC5hbW91bnQubWluIHx8IDApLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpXHJcbiAgICAgICAgY29uc3QgbWF4ID0gKGdyYW50LmFtb3VudC5tYXggfHwgOTk5OTk5OTk5KS50b0xvY2FsZVN0cmluZygnZW4tSU4nKVxyXG4gICAgICAgIGFtb3VudERpc3BsYXkgPSBg4oK5JHttaW59IC0g4oK5JHttYXh9YFxyXG4gICAgICB9IGVsc2UgaWYgKGdyYW50LmFtb3VudCkge1xyXG4gICAgICAgIGFtb3VudERpc3BsYXkgPSBncmFudC5hbW91bnRcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbW91bnREaXNwbGF5ID0gJ0Ftb3VudCB2YXJpZXMnXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJlc3BvbnNlICs9IGAqKiR7aW5kZXggKyAxfS4gJHtncmFudC50aXRsZSB8fCAnVW50aXRsZWQgR3JhbnQnfSoqICR7c291cmNlSWNvbn0gKCR7Z3JhbnQubWF0Y2hTY29yZX0lIG1hdGNoKVxcbmBcclxuICAgICAgcmVzcG9uc2UgKz0gYPCfkrAgJHthbW91bnREaXNwbGF5fVxcbmBcclxuICAgICAgcmVzcG9uc2UgKz0gYPCfj5vvuI8gUHJvdmlkZXI6ICR7Z3JhbnQuZ3JhbnRQcm92aWRlciB8fCAnTm90IHNwZWNpZmllZCd9XFxuYFxyXG4gICAgICBcclxuICAgICAgaWYgKGdyYW50LmFwcGxpY2F0aW9uRGVhZGxpbmUpIHtcclxuICAgICAgICByZXNwb25zZSArPSBg8J+ThSBEZWFkbGluZTogJHtuZXcgRGF0ZShncmFudC5hcHBsaWNhdGlvbkRlYWRsaW5lKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cXG5gXHJcbiAgICAgIH0gZWxzZSBpZiAoZ3JhbnQuc291cmNlID09PSAnbXlzY2hlbWUnKSB7XHJcbiAgICAgICAgcmVzcG9uc2UgKz0gYPCfk4UgRGVhZGxpbmU6IENoZWNrIG9mZmljaWFsIHdlYnNpdGVcXG5gXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJlc3BvbnNlICs9IGDinIUgV2h5IHRoaXMgbWF0Y2hlczpcXG5gXHJcbiAgICAgIGdyYW50Lm1hdGNoUmVhc29ucy5mb3JFYWNoKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgcmVzcG9uc2UgKz0gYCAgIOKAoiAke3JlYXNvbn1cXG5gXHJcbiAgICAgIH0pXHJcbiAgICAgIFxyXG4gICAgICBpZiAoZ3JhbnQuYXBwbGljYXRpb25VcmwpIHtcclxuICAgICAgICByZXNwb25zZSArPSBg8J+UlyBBcHBseTogJHtncmFudC5hcHBsaWNhdGlvblVybH1cXG5gXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHJlc3BvbnNlICs9IGBcXG5gXHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICByZXNwb25zZSArPSBgXFxu8J+TiyAqKk5leHQgU3RlcHM6KipcXG5cXG5gXHJcbiAgICByZXNwb25zZSArPSBgMS4gKipSZXZpZXcgRGV0YWlscyoqOiBDaGVjayB0aGUgZnVsbCBncmFudCBkZXRhaWxzIGFuZCBvZmZpY2lhbCB3ZWJzaXRlc1xcbmBcclxuICAgIHJlc3BvbnNlICs9IGAyLiAqKlZlcmlmeSBFbGlnaWJpbGl0eSoqOiBDb25maXJtIHlvdXIgc2Nob29sIG1lZXRzIGFsbCBjcml0ZXJpYVxcbmBcclxuICAgIHJlc3BvbnNlICs9IGAzLiAqKlByZXBhcmUgRG9jdW1lbnRzKio6IEdhdGhlciByZXF1aXJlZCBkb2N1bWVudHMgKHNjaG9vbCByZWdpc3RyYXRpb24sIFVESVNFLCBmaW5hbmNpYWwgc3RhdGVtZW50cywgZXRjLilcXG5gXHJcbiAgICByZXNwb25zZSArPSBgNC4gKipBcHBseSBPbmxpbmUqKjogVmlzaXQgdGhlIG9mZmljaWFsIHBvcnRhbCBsaW5rcyBwcm92aWRlZFxcbmBcclxuICAgIHJlc3BvbnNlICs9IGA1LiAqKlRyYWNrIEFwcGxpY2F0aW9uKio6IEtlZXAgeW91ciByZWZlcmVuY2UgbnVtYmVyIGFuZCBmb2xsb3cgdXAgcmVndWxhcmx5XFxuXFxuYFxyXG4gICAgXHJcbiAgICByZXNwb25zZSArPSBg8J+SoSAqKk5lZWQgaGVscCB3aXRoIGFwcGxpY2F0aW9uPyoqIEFzayBtZSBcIkhvdyBkbyBJIGFwcGx5IGZvciBbZ3JhbnQgbmFtZV0/XCIgYW5kIEknbGwgcHJvdmlkZSBzdGVwLWJ5LXN0ZXAgZ3VpZGFuY2UhXFxuXFxuYFxyXG4gICAgcmVzcG9uc2UgKz0gYPCfjJAgKipNeVNjaGVtZS5nb3YuaW4gSW50ZWdyYXRpb24qKjogUmVhbC10aW1lIGRhdGEgZnJvbSBnb3Zlcm5tZW50IHNjaGVtZXMgcG9ydGFsXFxuYFxyXG4gICAgcmVzcG9uc2UgKz0gYPCflJcgVmlzaXQgeW91ciAqKkdyYW50cyBEaXNjb3ZlcnkqKiBwYWdlIGluIHRoZSBkYXNoYm9hcmQgdG8gc2VlIGFsbCBkZXRhaWxzIGFuZCBhcHBsaWNhdGlvbiBsaW5rcy5gXHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLFxyXG4gICAgICB0eXBlOiAnZ3JhbnRfcmVjb21tZW5kYXRpb25zJyxcclxuICAgICAgZ3JhbnRzOiB0b3BHcmFudHMsXHJcbiAgICAgIHNvdXJjZXM6IHtcclxuICAgICAgICBsb2NhbDogbWF0Y2hlZExvY2FsR3JhbnRzLmxlbmd0aCxcclxuICAgICAgICBteXNjaGVtZTogbWF0Y2hlZE15U2NoZW1lR3JhbnRzLmxlbmd0aFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyByZWNvbW1lbmRhdGlvbnM6JywgZXJyb3IpXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBtZXNzYWdlOiBgSSBlbmNvdW50ZXJlZCBhbiBlcnJvciB3aGlsZSBhbmFseXppbmcgZ3JhbnRzLiBQbGVhc2UgdHJ5IGFnYWluIG9yIHZpc2l0IHRoZSBHcmFudHMgRGlzY292ZXJ5IHBhZ2UgaW4geW91ciBkYXNoYm9hcmQuXHJcblxyXG5FcnJvciBkZXRhaWxzOiAke2Vycm9yLm1lc3NhZ2V9YCxcclxuICAgICAgdHlwZTogJ2Vycm9yJ1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgbWVzc2FnZSwgY29udGV4dCA9IHt9IH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgXHJcbiAgICAvLyBHZW5lcmF0ZSByZXNwb25zZSB3aXRoIGNvbnRleHRcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZSwgY29udGV4dClcclxuICAgIFxyXG4gICAgLy8gSWYgcmVzdWx0IGhhcyBjb250ZXh0LCByZXR1cm4gaXRcclxuICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdClcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gT3RoZXJ3aXNlIHJldHVybiBhcyBzaW1wbGUgbWVzc2FnZVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogcmVzdWx0IH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0NoYXRib3QgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBtZXNzYWdlJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImZzIiwicGF0aCIsImNvbm5lY3REQiIsIkdyYW50IiwiTVlTQ0hFTUVfQVBJX0JBU0UiLCJmZXRjaE15U2NoZW1lRGF0YSIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInRpbWVvdXQiLCJvayIsInN0YXR1cyIsImFsdFJlc3BvbnNlIiwiRXJyb3IiLCJkYXRhIiwianNvbiIsInNjaGVtZXMiLCJsZW5ndGgiLCJlcnJvciIsIm1lc3NhZ2UiLCJpZCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1pbmlzdHJ5IiwiY2F0ZWdvcnkiLCJiZW5lZmljaWFyaWVzIiwiYW1vdW50IiwiZWxpZ2liaWxpdHkiLCJhcHBsaWNhdGlvblByb2Nlc3MiLCJ3ZWJzaXRlIiwiY2FsY3VsYXRlU2NoZW1lU2ltaWxhcml0eSIsInNjaGVtZSIsInNjaG9vbEFuc3dlcnMiLCJzY29yZSIsInJlYXNvbnMiLCJzY2hlbWVUZXh0Iiwiam9pbiIsInRvTG93ZXJDYXNlIiwibmVlZCIsIm5lZWRLZXl3b3JkcyIsImtleXdvcmRzIiwibWF0Y2hlZEtleXdvcmRzIiwiZmlsdGVyIiwia2V5d29yZCIsImluY2x1ZGVzIiwicHVzaCIsImluZnJhc3RydWN0dXJlIiwiYnVkZ2V0IiwiYW1vdW50TWF0Y2giLCJtYXRjaCIsInNjaGVtZUFtb3VudCIsInBhcnNlSW50IiwicmVwbGFjZSIsIk1hdGgiLCJtaW4iLCJnanRzRGF0YSIsImRhdGFQYXRoIiwicHJvY2VzcyIsImN3ZCIsImZpbGVDb250ZW50IiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsInBhcnNlIiwic2Nob29scyIsImFib3V0IiwiYWRtaXNzaW9ucyIsImNvdXJzZXMiLCJmYWNpbGl0aWVzIiwicGxhY2VtZW50cyIsImdlbmVyYXRlUmVzcG9uc2UiLCJjb252ZXJzYXRpb25Db250ZXh0IiwibG93ZXJNZXNzYWdlIiwiaW5HcmFudFF1ZXN0aW9ubmFpcmUiLCJzdGVwIiwicHJvY2Vzc0dyYW50UXVlc3Rpb25uYWlyZSIsInR5cGUiLCJjb250ZXh0IiwiZ3JhbnRBbnN3ZXJzIiwic2Nob29sTmFtZXMiLCJzY2hvb2xOYW1lIiwic2Nob29sIiwiZmluZCIsInMiLCJsb2NhdGlvbiIsImRpc3RyaWN0IiwiZXN0YWJsaXNoZWQiLCJzdHVkZW50cyIsImVtYWlsIiwicGhvbmUiLCJhZGRyZXNzIiwibWFwIiwiYyIsImYiLCJhY2hpZXZlbWVudHMiLCJhIiwiZW5yb2xsbWVudCIsIm51bWJlck1hdGNoIiwiYnVkZ2V0UmFuZ2UiLCJ0aW1lbGluZSIsImdlbmVyYXRlR3JhbnRSZWNvbW1lbmRhdGlvbnMiLCJhbnN3ZXJzIiwibG9jYWxHcmFudHMiLCJteVNjaGVtZURhdGEiLCJQcm9taXNlIiwiYWxsIiwibGVhbiIsIm1hdGNoZWRMb2NhbEdyYW50cyIsImdyYW50IiwiZ3JhbnRNaW4iLCJncmFudE1heCIsIm1heCIsImFwcGxpY2F0aW9uRGVhZGxpbmUiLCJkZWFkbGluZSIsIkRhdGUiLCJub3ciLCJkYXlzVW50aWxEZWFkbGluZSIsImZsb29yIiwibWF0Y2hTY29yZSIsIm1hdGNoUmVhc29ucyIsInNvdXJjZSIsIm1hdGNoZWRNeVNjaGVtZUdyYW50cyIsInNpbWlsYXJpdHkiLCJ0aXRsZSIsImdyYW50UHJvdmlkZXIiLCJhcHBsaWNhdGlvblVybCIsImFsbE1hdGNoZWRHcmFudHMiLCJzb3J0IiwiYiIsInRvcEdyYW50cyIsInNsaWNlIiwiZm9yRWFjaCIsImluZGV4Iiwic291cmNlSWNvbiIsImFtb3VudERpc3BsYXkiLCJwZXJTY2hvb2xBbW91bnQiLCJ0b3RhbEFtb3VudCIsInRvTG9jYWxlU3RyaW5nIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicmVhc29uIiwiZ3JhbnRzIiwic291cmNlcyIsImxvY2FsIiwibXlzY2hlbWUiLCJQT1NUIiwicmVxdWVzdCIsInJlc3VsdCIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chatbot/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/models/Grant.js":
/*!*****************************!*\
  !*** ./lib/models/Grant.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst grantSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    grantProvider: {\n        type: String,\n        required: true\n    },\n    providerType: {\n        type: String,\n        enum: [\n            \"government\",\n            \"private\",\n            \"ngo\",\n            \"corporate\",\n            \"international\"\n        ],\n        required: true\n    },\n    amount: {\n        min: Number,\n        max: Number,\n        currency: {\n            type: String,\n            default: \"INR\"\n        }\n    },\n    totalAmount: {\n        type: String // e.g., \"Rs 2,94,283 crore (2021-26)\" - total scheme budget\n    },\n    perSchoolAmount: {\n        type: String // e.g., \"Rs 5-15 lakh per school\" - amount per school\n    },\n    eligibilityCriteria: [\n        {\n            criterion: String,\n            met: Boolean,\n            notes: String\n        }\n    ],\n    applicationDeadline: {\n        type: Date,\n        required: true\n    },\n    grantUrl: {\n        type: String\n    },\n    applicationUrl: {\n        type: String\n    },\n    category: {\n        type: String,\n        enum: [\n            \"education\",\n            \"infrastructure\",\n            \"technology\",\n            \"research\",\n            \"skill-development\",\n            \"other\"\n        ]\n    },\n    targetBeneficiaries: [\n        String\n    ],\n    aiEligibilityScore: {\n        type: Number,\n        min: 0,\n        max: 100\n    },\n    aiRecommendation: {\n        shouldApply: Boolean,\n        reasoning: String,\n        successProbability: Number,\n        requiredDocuments: [\n            String\n        ],\n        estimatedEffort: String\n    },\n    applicableSchools: [\n        {\n            type: String,\n            enum: [\n                \"Ballari\",\n                \"Bhadravati\",\n                \"Hubballi\",\n                \"Bagalkot\",\n                \"Kalburgi\",\n                \"Mangalore\"\n            ]\n        }\n    ],\n    status: {\n        type: String,\n        enum: [\n            \"discovered\",\n            \"under-review\",\n            \"eligible\",\n            \"not-eligible\",\n            \"applied\",\n            \"approved\",\n            \"rejected\"\n        ],\n        default: \"discovered\"\n    },\n    applicationStatus: {\n        appliedDate: Date,\n        appliedBy: String,\n        documents: [\n            String\n        ],\n        followUpDates: [\n            Date\n        ],\n        outcome: String\n    },\n    discoveredBy: {\n        type: String,\n        enum: [\n            \"ai-agent\",\n            \"manual\",\n            \"notification\"\n        ],\n        default: \"ai-agent\"\n    },\n    discoveredAt: {\n        type: Date,\n        default: Date.now\n    },\n    lastUpdated: {\n        type: Date,\n        default: Date.now\n    }\n});\n// Update timestamp\ngrantSchema.pre(\"save\", function(next) {\n    this.lastUpdated = Date.now();\n    next();\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Grant || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Grant\", grantSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9kZWxzL0dyYW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUUvQixNQUFNQyxjQUFjLElBQUlELHdEQUFlLENBQUM7SUFDdENHLE9BQU87UUFDTEMsTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FDLGFBQWE7UUFDWEgsTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FFLGVBQWU7UUFDYkosTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FHLGNBQWM7UUFDWkwsTUFBTUM7UUFDTkssTUFBTTtZQUFDO1lBQWM7WUFBVztZQUFPO1lBQWE7U0FBZ0I7UUFDcEVKLFVBQVU7SUFDWjtJQUNBSyxRQUFRO1FBQ05DLEtBQUtDO1FBQ0xDLEtBQUtEO1FBQ0xFLFVBQVU7WUFDUlgsTUFBTUM7WUFDTlcsU0FBUztRQUNYO0lBQ0Y7SUFDQUMsYUFBYTtRQUNYYixNQUFNQyxPQUFRLDREQUE0RDtJQUM1RTtJQUNBYSxpQkFBaUI7UUFDZmQsTUFBTUMsT0FBUSxzREFBc0Q7SUFDdEU7SUFDQWMscUJBQXFCO1FBQUM7WUFDcEJDLFdBQVdmO1lBQ1hnQixLQUFLQztZQUNMQyxPQUFPbEI7UUFDVDtLQUFFO0lBQ0ZtQixxQkFBcUI7UUFDbkJwQixNQUFNcUI7UUFDTm5CLFVBQVU7SUFDWjtJQUNBb0IsVUFBVTtRQUNSdEIsTUFBTUM7SUFDUjtJQUNBc0IsZ0JBQWdCO1FBQ2R2QixNQUFNQztJQUNSO0lBQ0F1QixVQUFVO1FBQ1J4QixNQUFNQztRQUNOSyxNQUFNO1lBQUM7WUFBYTtZQUFrQjtZQUFjO1lBQVk7WUFBcUI7U0FBUTtJQUMvRjtJQUNBbUIscUJBQXFCO1FBQUN4QjtLQUFPO0lBQzdCeUIsb0JBQW9CO1FBQ2xCMUIsTUFBTVM7UUFDTkQsS0FBSztRQUNMRSxLQUFLO0lBQ1A7SUFDQWlCLGtCQUFrQjtRQUNoQkMsYUFBYVY7UUFDYlcsV0FBVzVCO1FBQ1g2QixvQkFBb0JyQjtRQUNwQnNCLG1CQUFtQjtZQUFDOUI7U0FBTztRQUMzQitCLGlCQUFpQi9CO0lBQ25CO0lBQ0FnQyxtQkFBbUI7UUFBQztZQUNsQmpDLE1BQU1DO1lBQ05LLE1BQU07Z0JBQUM7Z0JBQVc7Z0JBQWM7Z0JBQVk7Z0JBQVk7Z0JBQVk7YUFBWTtRQUNsRjtLQUFFO0lBQ0Y0QixRQUFRO1FBQ05sQyxNQUFNQztRQUNOSyxNQUFNO1lBQUM7WUFBYztZQUFnQjtZQUFZO1lBQWdCO1lBQVc7WUFBWTtTQUFXO1FBQ25HTSxTQUFTO0lBQ1g7SUFDQXVCLG1CQUFtQjtRQUNqQkMsYUFBYWY7UUFDYmdCLFdBQVdwQztRQUNYcUMsV0FBVztZQUFDckM7U0FBTztRQUNuQnNDLGVBQWU7WUFBQ2xCO1NBQUs7UUFDckJtQixTQUFTdkM7SUFDWDtJQUNBd0MsY0FBYztRQUNaekMsTUFBTUM7UUFDTkssTUFBTTtZQUFDO1lBQVk7WUFBVTtTQUFlO1FBQzVDTSxTQUFTO0lBQ1g7SUFDQThCLGNBQWM7UUFDWjFDLE1BQU1xQjtRQUNOVCxTQUFTUyxLQUFLc0IsR0FBRztJQUNuQjtJQUNBQyxhQUFhO1FBQ1g1QyxNQUFNcUI7UUFDTlQsU0FBU1MsS0FBS3NCLEdBQUc7SUFDbkI7QUFDRjtBQUVBLG1CQUFtQjtBQUNuQjlDLFlBQVlnRCxHQUFHLENBQUMsUUFBUSxTQUFTQyxJQUFJO0lBQ25DLElBQUksQ0FBQ0YsV0FBVyxHQUFHdkIsS0FBS3NCLEdBQUc7SUFDM0JHO0FBQ0Y7QUFFQSxpRUFBZWxELHdEQUFlLENBQUNvRCxLQUFLLElBQUlwRCxxREFBYyxDQUFDLFNBQVNDLFlBQVlBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nanRzLWthcm5hdGFrYS13ZWJzaXRlLy4vbGliL21vZGVscy9HcmFudC5qcz9iZjQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSdcclxuXHJcbmNvbnN0IGdyYW50U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdGl0bGU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBkZXNjcmlwdGlvbjoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIGdyYW50UHJvdmlkZXI6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBwcm92aWRlclR5cGU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsnZ292ZXJubWVudCcsICdwcml2YXRlJywgJ25nbycsICdjb3Jwb3JhdGUnLCAnaW50ZXJuYXRpb25hbCddLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIGFtb3VudDoge1xyXG4gICAgbWluOiBOdW1iZXIsXHJcbiAgICBtYXg6IE51bWJlcixcclxuICAgIGN1cnJlbmN5OiB7XHJcbiAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgZGVmYXVsdDogJ0lOUidcclxuICAgIH1cclxuICB9LFxyXG4gIHRvdGFsQW1vdW50OiB7XHJcbiAgICB0eXBlOiBTdHJpbmcgIC8vIGUuZy4sIFwiUnMgMiw5NCwyODMgY3JvcmUgKDIwMjEtMjYpXCIgLSB0b3RhbCBzY2hlbWUgYnVkZ2V0XHJcbiAgfSxcclxuICBwZXJTY2hvb2xBbW91bnQ6IHtcclxuICAgIHR5cGU6IFN0cmluZyAgLy8gZS5nLiwgXCJScyA1LTE1IGxha2ggcGVyIHNjaG9vbFwiIC0gYW1vdW50IHBlciBzY2hvb2xcclxuICB9LFxyXG4gIGVsaWdpYmlsaXR5Q3JpdGVyaWE6IFt7XHJcbiAgICBjcml0ZXJpb246IFN0cmluZyxcclxuICAgIG1ldDogQm9vbGVhbixcclxuICAgIG5vdGVzOiBTdHJpbmdcclxuICB9XSxcclxuICBhcHBsaWNhdGlvbkRlYWRsaW5lOiB7XHJcbiAgICB0eXBlOiBEYXRlLFxyXG4gICAgcmVxdWlyZWQ6IHRydWVcclxuICB9LFxyXG4gIGdyYW50VXJsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmdcclxuICB9LFxyXG4gIGFwcGxpY2F0aW9uVXJsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmdcclxuICB9LFxyXG4gIGNhdGVnb3J5OiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbJ2VkdWNhdGlvbicsICdpbmZyYXN0cnVjdHVyZScsICd0ZWNobm9sb2d5JywgJ3Jlc2VhcmNoJywgJ3NraWxsLWRldmVsb3BtZW50JywgJ290aGVyJ11cclxuICB9LFxyXG4gIHRhcmdldEJlbmVmaWNpYXJpZXM6IFtTdHJpbmddLFxyXG4gIGFpRWxpZ2liaWxpdHlTY29yZToge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgbWluOiAwLFxyXG4gICAgbWF4OiAxMDBcclxuICB9LFxyXG4gIGFpUmVjb21tZW5kYXRpb246IHtcclxuICAgIHNob3VsZEFwcGx5OiBCb29sZWFuLFxyXG4gICAgcmVhc29uaW5nOiBTdHJpbmcsXHJcbiAgICBzdWNjZXNzUHJvYmFiaWxpdHk6IE51bWJlcixcclxuICAgIHJlcXVpcmVkRG9jdW1lbnRzOiBbU3RyaW5nXSxcclxuICAgIGVzdGltYXRlZEVmZm9ydDogU3RyaW5nXHJcbiAgfSxcclxuICBhcHBsaWNhYmxlU2Nob29sczogW3tcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFsnQmFsbGFyaScsICdCaGFkcmF2YXRpJywgJ0h1YmJhbGxpJywgJ0JhZ2Fsa290JywgJ0thbGJ1cmdpJywgJ01hbmdhbG9yZSddXHJcbiAgfV0sXHJcbiAgc3RhdHVzOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbJ2Rpc2NvdmVyZWQnLCAndW5kZXItcmV2aWV3JywgJ2VsaWdpYmxlJywgJ25vdC1lbGlnaWJsZScsICdhcHBsaWVkJywgJ2FwcHJvdmVkJywgJ3JlamVjdGVkJ10sXHJcbiAgICBkZWZhdWx0OiAnZGlzY292ZXJlZCdcclxuICB9LFxyXG4gIGFwcGxpY2F0aW9uU3RhdHVzOiB7XHJcbiAgICBhcHBsaWVkRGF0ZTogRGF0ZSxcclxuICAgIGFwcGxpZWRCeTogU3RyaW5nLFxyXG4gICAgZG9jdW1lbnRzOiBbU3RyaW5nXSxcclxuICAgIGZvbGxvd1VwRGF0ZXM6IFtEYXRlXSxcclxuICAgIG91dGNvbWU6IFN0cmluZ1xyXG4gIH0sXHJcbiAgZGlzY292ZXJlZEJ5OiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbJ2FpLWFnZW50JywgJ21hbnVhbCcsICdub3RpZmljYXRpb24nXSxcclxuICAgIGRlZmF1bHQ6ICdhaS1hZ2VudCdcclxuICB9LFxyXG4gIGRpc2NvdmVyZWRBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgfSxcclxuICBsYXN0VXBkYXRlZDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgfVxyXG59KVxyXG5cclxuLy8gVXBkYXRlIHRpbWVzdGFtcFxyXG5ncmFudFNjaGVtYS5wcmUoJ3NhdmUnLCBmdW5jdGlvbihuZXh0KSB7XHJcbiAgdGhpcy5sYXN0VXBkYXRlZCA9IERhdGUubm93KClcclxuICBuZXh0KClcclxufSlcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5HcmFudCB8fCBtb25nb29zZS5tb2RlbCgnR3JhbnQnLCBncmFudFNjaGVtYSlcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiZ3JhbnRTY2hlbWEiLCJTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsImRlc2NyaXB0aW9uIiwiZ3JhbnRQcm92aWRlciIsInByb3ZpZGVyVHlwZSIsImVudW0iLCJhbW91bnQiLCJtaW4iLCJOdW1iZXIiLCJtYXgiLCJjdXJyZW5jeSIsImRlZmF1bHQiLCJ0b3RhbEFtb3VudCIsInBlclNjaG9vbEFtb3VudCIsImVsaWdpYmlsaXR5Q3JpdGVyaWEiLCJjcml0ZXJpb24iLCJtZXQiLCJCb29sZWFuIiwibm90ZXMiLCJhcHBsaWNhdGlvbkRlYWRsaW5lIiwiRGF0ZSIsImdyYW50VXJsIiwiYXBwbGljYXRpb25VcmwiLCJjYXRlZ29yeSIsInRhcmdldEJlbmVmaWNpYXJpZXMiLCJhaUVsaWdpYmlsaXR5U2NvcmUiLCJhaVJlY29tbWVuZGF0aW9uIiwic2hvdWxkQXBwbHkiLCJyZWFzb25pbmciLCJzdWNjZXNzUHJvYmFiaWxpdHkiLCJyZXF1aXJlZERvY3VtZW50cyIsImVzdGltYXRlZEVmZm9ydCIsImFwcGxpY2FibGVTY2hvb2xzIiwic3RhdHVzIiwiYXBwbGljYXRpb25TdGF0dXMiLCJhcHBsaWVkRGF0ZSIsImFwcGxpZWRCeSIsImRvY3VtZW50cyIsImZvbGxvd1VwRGF0ZXMiLCJvdXRjb21lIiwiZGlzY292ZXJlZEJ5IiwiZGlzY292ZXJlZEF0Iiwibm93IiwibGFzdFVwZGF0ZWQiLCJwcmUiLCJuZXh0IiwibW9kZWxzIiwiR3JhbnQiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/models/Grant.js\n");

/***/ }),

/***/ "(rsc)/./lib/mongodb.js":
/*!************************!*\
  !*** ./lib/mongodb.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/gjts_karnataka\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            console.log(\"âœ… MongoDB connected successfully\");\n            return mongoose;\n        }).catch((error)=>{\n            console.error(\"âŒ MongoDB connection error:\", error);\n            throw error;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvbW9uZ29kYi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0I7QUFFL0IsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXLElBQUk7QUFFL0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFBTTtBQUNsQjtBQUVBLElBQUlDLFNBQVNDLE9BQU9OLFFBQVE7QUFFNUIsSUFBSSxDQUFDSyxRQUFRO0lBQ1hBLFNBQVNDLE9BQU9OLFFBQVEsR0FBRztRQUFFTyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUN6RDtBQUVBLGVBQWVDO0lBQ2IsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2YsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE9BQU87WUFDWEMsZ0JBQWdCO1FBQ2xCO1FBRUFOLE9BQU9HLE9BQU8sR0FBR1IsdURBQWdCLENBQUNDLGFBQWFTLE1BQU1HLElBQUksQ0FBQyxDQUFDYjtZQUN6RGMsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBT2Y7UUFDVCxHQUFHZ0IsS0FBSyxDQUFDLENBQUNDO1lBQ1JILFFBQVFHLEtBQUssQ0FBQywrQkFBK0JBO1lBQzdDLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLElBQUk7UUFDRlosT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDcEMsRUFBRSxPQUFPVSxHQUFHO1FBQ1ZiLE9BQU9HLE9BQU8sR0FBRztRQUNqQixNQUFNVTtJQUNSO0lBRUEsT0FBT2IsT0FBT0UsSUFBSTtBQUNwQjtBQUVBLGlFQUFlRSxTQUFTQSxFQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2p0cy1rYXJuYXRha2Etd2Vic2l0ZS8uL2xpYi9tb25nb2RiLmpzP2Q5MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSB8fCAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9nanRzX2thcm5hdGFrYSdcclxuXHJcbmlmICghTU9OR09EQl9VUkkpIHtcclxuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlJylcclxufVxyXG5cclxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZVxyXG5cclxuaWYgKCFjYWNoZWQpIHtcclxuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XHJcbiAgaWYgKGNhY2hlZC5jb25uKSB7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm5cclxuICB9XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiBmYWxzZSxcclxuICAgIH1cclxuXHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTW9uZ29EQiBjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgICAgcmV0dXJuIG1vbmdvb3NlXHJcbiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcign4p2MIE1vbmdvREIgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcilcclxuICAgICAgdGhyb3cgZXJyb3JcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIGNhY2hlZC5wcm9taXNlID0gbnVsbFxyXG4gICAgdGhyb3cgZVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNhY2hlZC5jb25uXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdFxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0Iiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwiY29ubmVjdCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJlcnJvciIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/mongodb.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fchatbot%2Froute&page=%2Fapi%2Fchatbot%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchatbot%2Froute.js&appDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDownloads%5Cgjts-karnataka-website&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();